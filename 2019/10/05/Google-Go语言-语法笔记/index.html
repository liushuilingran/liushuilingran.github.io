<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Google Go语言 语法笔记 - MCFON</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="MCFON"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="MCFON"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="包 Package包的声明 Declare 使用package关键字声明当前源文件所在的包包声明语句是所有源文件的第一行非注释语句包名称中不能包含空白字符包名推荐与源文件所在的目录名称保持一致每个目录中只能定义一个package"><meta property="og:type" content="blog"><meta property="og:title" content="Google Go语言 语法笔记"><meta property="og:url" content="https://huzhiliang.com/2019/10/05/Google-Go%E8%AF%AD%E8%A8%80-%E8%AF%AD%E6%B3%95%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="MCFON"><meta property="og:description" content="包 Package包的声明 Declare 使用package关键字声明当前源文件所在的包包声明语句是所有源文件的第一行非注释语句包名称中不能包含空白字符包名推荐与源文件所在的目录名称保持一致每个目录中只能定义一个package"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://huzhiliang.com/img/og_image.png"><meta property="article:published_time" content="2019-10-04T19:29:00.000Z"><meta property="article:modified_time" content="2019-12-25T21:03:52.637Z"><meta property="article:author" content="ฅ´ω`ฅ"><meta property="article:tag" content="Go"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://huzhiliang.com/2019/10/05/Google-Go%E8%AF%AD%E8%A8%80-%E8%AF%AD%E6%B3%95%E7%AC%94%E8%AE%B0/"},"headline":"MCFON","image":["https://huzhiliang.com/img/og_image.png"],"datePublished":"2019-10-04T19:29:00.000Z","dateModified":"2019-12-25T21:03:52.637Z","author":{"@type":"Person","name":"ฅ´ω`ฅ"},"description":"包 Package包的声明 Declare 使用package关键字声明当前源文件所在的包包声明语句是所有源文件的第一行非注释语句包名称中不能包含空白字符包名推荐与源文件所在的目录名称保持一致每个目录中只能定义一个package"}</script><link rel="canonical" href="https://huzhiliang.com/2019/10/05/Google-Go%E8%AF%AD%E8%A8%80-%E8%AF%AD%E6%B3%95%E7%AC%94%E8%AE%B0/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.3.0"></head><body class="is-2-column"><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/" alt="MCFON" height="28"><img class="logo-img-dark" src="/" alt="MCFON" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives/">时间轴</a><a class="navbar-item" href="/categories/">分类</a><a class="navbar-item" href="/tags/">标签</a><a class="navbar-item" target="_blank" rel="noopener" href="https://imaegoo.azurewebsites.net">网盘</a><a class="navbar-item" href="/messages/">留言板</a><a class="navbar-item" href="/friends/">友情链接</a><a class="navbar-item" href="/about/">关于</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-10-04T19:29:00.000Z" title="2019-10-04T19:29:00.000Z">2019-10-05</time>发表</span><span class="level-item"><time dateTime="2019-12-25T21:03:52.637Z" title="2019-12-25T21:03:52.637Z">2019-12-26</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Golang/">Golang</a></span><span class="level-item">1 小时读完 (大约12646个字)</span><span class="level-item leancloud_visitors" id="/2019/10/05/Google-Go%E8%AF%AD%E8%A8%80-%E8%AF%AD%E6%B3%95%E7%AC%94%E8%AE%B0/" data-flag-title="Google Go语言 语法笔记"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="twikoo_visitors"><i class="fa fa-spinner fa-spin"></i></span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Google Go语言 语法笔记</h1><div class="content"><h2 id="包-Package"><a href="#包-Package" class="headerlink" title="包 Package"></a><span id="包-package"><strong>包 Package</strong></span></h2><h3 id="包的声明-Declare"><a href="#包的声明-Declare" class="headerlink" title="包的声明 Declare"></a><span id="包的声明-declare"><strong>包的声明 Declare</strong></span></h3><ul>
<li><p>使用<code>package</code>关键字声明当前源文件所在的包<br>包声明语句是所有源文件的第一行非注释语句<br>包名称中不能包含空白字符<br>包名推荐与源文件所在的目录名称保持一致<br>每个目录中只能定义一个package</p>
<a id="more"></a>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cxy     <span class="comment">// 声明一个名为“cxy”的包</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> 我的包   <span class="comment">// 声明一个名为“我的包”的包</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main    <span class="comment">// main包, 程序启动执行的入口包</span></span><br></pre></td></tr></table></figure>
<p>错误的包声明</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="string">&quot;mypkg&quot;</span> <span class="comment">// 错误</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> a/b/c   <span class="comment">// 错误</span></span><br><span class="line"></span><br><span class="line">pakcage a.b.c   <span class="comment">// 错误</span></span><br></pre></td></tr></table></figure>
<h3 id="包的导入-Import"><a href="#包的导入-Import" class="headerlink" title="包的导入 Import"></a><span id="包的导入-import"><strong>包的导入 Import</strong></span></h3></li>
<li><p>导入包路径是对应包在<code>$GOROOT/pkg/$GOOS_$GOARCH/</code>、<code>$GOPATH/pkg/$GOOS_$GOARCH/</code>或<code>当前路径</code>中的相对路径</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入$GOROOT/$GOOS_$GOARCH/中的相对路径包(官方标准库)</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;math/rand&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入$GOPATH/$GOOS_$GOARCH/中的相对路径包</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/user/project/pkg&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;code.google.com/p/project/pkg&quot;</span></span><br></pre></td></tr></table></figure>
<p>导入当前包的相对路径包<br>例如有Go目录如下：<br>$GOPATH/src<br>　├─x0<br>　│　├─y0<br>　│　│　└─z0<br>　│　└─y1<br>　│　　└─z1<br>　└─x1<br>　　└─y2</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./y0/z0&quot;</span>    <span class="comment">// x0包中导入子包 z0包</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;../y0/z0&quot;</span>   <span class="comment">// y1包中导入子包 z0包</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;x0/y1/z1&quot;</span>   <span class="comment">// y2包中导入 z1包</span></span><br></pre></td></tr></table></figure>
<p>错误的导入包路径</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> a/b/c        <span class="comment">// 错误</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;a.b.c&quot;</span>      <span class="comment">// 错误</span></span><br><span class="line"><span class="keyword">import</span> a.b.c        <span class="comment">// 错误</span></span><br></pre></td></tr></table></figure></li>
<li><p>用圆括号组合导入包路径</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (<span class="string">&quot;fmt&quot;</span>; <span class="string">&quot;math&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>导入包可以定义别名，防止同名称的包冲突</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;a/b/c&quot;</span></span><br><span class="line"></span><br><span class="line">    c1 <span class="string">&quot;x/y/c&quot;</span>     <span class="comment">// 将导入的包c定义别名为 c1</span></span><br><span class="line"></span><br><span class="line">    格式化 <span class="string">&quot;fmt&quot;</span>    <span class="comment">// 将导入的包fmt定义别名为 格式化</span></span><br><span class="line"></span><br><span class="line">    m <span class="string">&quot;math&quot;</span>       <span class="comment">// 将导入的包math定义别名为 m</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>引用包名是导入包路径的最后一个目录中定义的唯一包的名称<br>定义的包名与目录同名时，直接引用即可</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用普通名称的导入包</span></span><br><span class="line">c.hello()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引用定义别名的包</span></span><br><span class="line">格式化.Println(m.Pi)</span><br></pre></td></tr></table></figure>
<p>定义的包名与所在目录名称不同时，导入包路径仍为目录所在路径，引用包名为定义的包名称</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 源文件路径: $GOPATH/src/proj/my-util/util.go</span></span><br><span class="line"><span class="comment">// 定义包名: util</span></span><br><span class="line"><span class="keyword">package</span> util</span><br></pre></td></tr></table></figure>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入util包路径</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;proj/my-util&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引用util包</span></span><br><span class="line">util.doSomething()</span><br></pre></td></tr></table></figure></li>
<li><p>静态导入，在导入的包路径之前增加一个小数点<code>.</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类似C中的include 或Java中的import static</span></span><br><span class="line"><span class="keyword">import</span> . <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 然后像使用本包元素一样使用fmt包中可见的元素，不需要通过包名引用</span></span><br><span class="line">Println(<span class="string">&quot;no need package name&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>导入包但不直接使用该包，在导入的包路径之前增加一个下划线<code>_</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果当前go源文件中未引用过log包，将会导致编译错误</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;log&quot;</span>    <span class="comment">// 错误</span></span><br><span class="line"><span class="keyword">import</span> . <span class="string">&quot;log&quot;</span>  <span class="comment">// 静态导入未使用同样报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在包名前面增加下划线表示导入包但是不直接使用它，被导入的包中的init函数会在导入的时候执行</span></span><br><span class="line"><span class="keyword">import</span> _ <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="包内元素的可见性-Accessability"><a href="#包内元素的可见性-Accessability" class="headerlink" title="包内元素的可见性 Accessability"></a><span id="包内元素的可见性-accessability"><strong>包内元素的可见性 Accessability</strong></span></h3></li>
<li><p>名称首字符为<a target="_blank" rel="noopener" href="http://www.fileformat.info/info/unicode/category/Lu/list.htm">Unicode包含的大写字母</a>的元素是被导出的，对外部包是可见的<br>首字为非大写字母的元素只对本包可见(同包跨源文件可以访问，子包不能访问)</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> In <span class="keyword">int</span>                                      <span class="comment">// In is exported</span></span><br><span class="line"><span class="keyword">var</span> in <span class="keyword">byte</span>                                     <span class="comment">// in is unexported</span></span><br><span class="line"><span class="keyword">var</span> ȸȹ <span class="keyword">string</span>                                   <span class="comment">// ȸȹ is unexported</span></span><br><span class="line"><span class="keyword">const</span> Ȼom <span class="keyword">bool</span> = <span class="literal">false</span>                          <span class="comment">// Ȼom is exported</span></span><br><span class="line"><span class="keyword">const</span> ѧѩ <span class="keyword">uint8</span> = <span class="number">1</span>                             <span class="comment">// ѧѩ is unexported</span></span><br><span class="line"><span class="keyword">type</span> Ĩnteger <span class="keyword">int</span>                                <span class="comment">// Ĩnteger is exported</span></span><br><span class="line"><span class="keyword">type</span> ブーリアン *<span class="keyword">bool</span>                             <span class="comment">// ブーリアン is unexported</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> Ӭ<span class="title">xport</span><span class="params">()</span></span> &#123;...&#125;                              <span class="comment">// Ӭxport is exported</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> į<span class="title">nner</span><span class="params">()</span></span> &#123;...&#125;                               <span class="comment">// įnner is unexported</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(me *Integer)</span> ⱱ<span class="title">alueOf</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;...&#125;   <span class="comment">// ⱱalueOf is unexported</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i ブーリアン)</span> Ȿ<span class="title">tring</span><span class="params">()</span> <span class="title">string</span></span> &#123;...&#125;         <span class="comment">// Ȿtring is exported</span></span><br></pre></td></tr></table></figure></li>
<li><p>internal包（内部包） <code>Go1.4+</code><br>internal包及其子包中的导出元素只能被与internal同父包的其他包访问  </p>
<p>例如有Go目录如下：<br>$GOPATH/src<br>　├─x0<br>　│　├─<code>internal</code><br>　│　│　└─z0<br>　│　└─y0<br>　│　　└─z1<br>　└─x1<br>　　└─y1</p>
<p>x0，y0，z1包中可以访问internal，z0包中的可见元素<br>x1，y1包中不能导入internal，z0包</p>
</li>
<li><p>规范导入包路径Canonical import paths <code>Go1.4+</code><br>包声明语句后面添加标记注释，用于标识这个包的规范导入路径。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pdf <span class="comment">// import &quot;rsc.io/pdf&quot;</span></span><br></pre></td></tr></table></figure>
<p>如果使用此包的代码的导入的路径不是规范路径，go命令会拒绝编译。<br>例如有 <a href="">rsc.io/pdf</a> 的一个fork路径 <a href="">github.com/rsc/pdf</a><br>如下程序代码导入路径时使用了非规范的路径则会被go拒绝编译</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/rsc/pdf&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="数据类型-Data-Type"><a href="#数据类型-Data-Type" class="headerlink" title="数据类型 Data Type"></a><span id="数据类型-data-type"><strong>数据类型 Data Type</strong></span></h2></li>
</ul>
<h3 id="基础数据类型-Basic-data-type"><a href="#基础数据类型-Basic-data-type" class="headerlink" title="基础数据类型 Basic data type"></a><span id="基础数据类型-basic-data-type"><strong>基础数据类型 Basic data type</strong></span></h3><ul>
<li><p>基本类型包含：数值类型，布尔类型，字符串</p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">取值范围</th>
<th align="center">默认零值</th>
<th align="center">类型</th>
<th align="center">取值范围</th>
<th align="center">默认零值</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>int</code></td>
<td align="center"><strong>int32,int64</strong></td>
<td align="center">0</td>
<td align="center"><code>uint</code></td>
<td align="center"><strong>uint32,uint64</strong></td>
<td align="center">0</td>
</tr>
<tr>
<td align="center"><code>int8</code></td>
<td align="center"><strong>-2<sup>7</sup> ~ 2<sup>7</sup>-1</strong></td>
<td align="center">0</td>
<td align="center"><code>uint8</code>,<code>byte</code></td>
<td align="center">0 ~ <strong>2<sup>8</sup>-1</strong></td>
<td align="center">0</td>
</tr>
<tr>
<td align="center"><code>int16</code></td>
<td align="center"><strong>-2<sup>15</sup> ~ 2<sup>15</sup>-1</strong></td>
<td align="center">0</td>
<td align="center"><code>uint16</code></td>
<td align="center">0 ~ <strong>2<sup>16</sup>-1</strong></td>
<td align="center">0</td>
</tr>
<tr>
<td align="center"><code>int32</code>,<code>rune</code></td>
<td align="center"><strong>-2<sup>31</sup> ~ 2<sup>31</sup>-1</strong></td>
<td align="center">0</td>
<td align="center"><code>uint32</code></td>
<td align="center">0 ~ <strong>2<sup>32</sup>-1</strong></td>
<td align="center">0</td>
</tr>
<tr>
<td align="center"><code>int64</code></td>
<td align="center"><strong>-2<sup>63</sup> ~ 2<sup>63</sup>-1</strong></td>
<td align="center">0</td>
<td align="center"><code>uint64</code></td>
<td align="center">0 ~ <strong>2<sup>64</sup>-1</strong></td>
<td align="center">0</td>
</tr>
<tr>
<td align="center"><code>float32</code></td>
<td align="center">IEEE-754 32-bit</td>
<td align="center">0.0</td>
<td align="center"><code>float64</code></td>
<td align="center">IEEE-754 64-bit</td>
<td align="center">0.0</td>
</tr>
<tr>
<td align="center"><code>complex64</code></td>
<td align="center"><strong>float32+float32</strong>i</td>
<td align="center">0 + 0i</td>
<td align="center"><code>complex128</code></td>
<td align="center"><strong>float64+float64</strong>i</td>
<td align="center">0 + 0i</td>
</tr>
<tr>
<td align="center"><code>bool</code></td>
<td align="center"><strong>true,false</strong></td>
<td align="center">false</td>
<td align="center"><code>string</code></td>
<td align="center">“” ~ “∞”</td>
<td align="center">“”,``</td>
</tr>
<tr>
<td align="center"><code>uintptr</code></td>
<td align="center"><strong>uint32,uint64</strong></td>
<td align="center">0</td>
<td align="center"><code>error</code></td>
<td align="center">-</td>
<td align="center">nil</td>
</tr>
</tbody></table>
<blockquote>
<p><code>byte</code> 是 <code>uint8</code> 的别名  </p>
<pre><code>`rune` 是 `int32` 的别名，代表一个Unicode码点  
`int`与`int32`或`int64`是不同的类型，只是根据架构对应32/64位值  
`uint`与`uint32`或`uint64`是不同的类型，只是根据架构对应32/64位值</code></pre>
</blockquote>
</li>
</ul>
<h3 id="变量-Variable"><a href="#变量-Variable" class="headerlink" title="变量 Variable"></a><span id="变量-variable"><strong>变量 Variable</strong></span></h3><ul>
<li><p>变量声明, 使用<code>var</code>关键字<br>Go中只能使用<code>var</code> <strong>声明</strong>变量，无需显式初始化值</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i <span class="keyword">int</span>       <span class="comment">// i = 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s <span class="keyword">string</span>    <span class="comment">// s = &quot;&quot;    (Go中的string是值类型，默认零值是空串 &quot;&quot; 或 ``，不存在nil(null)值)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> e error     <span class="comment">// e = nil, error是Go的内建接口类型。</span></span><br></pre></td></tr></table></figure>

<p>关键字的顺序错误或缺少都是编译错误的</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">int</span> a       <span class="comment">// 编译错误</span></span><br><span class="line">a <span class="keyword">int</span>           <span class="comment">// 编译错误</span></span><br><span class="line"><span class="keyword">int</span> a           <span class="comment">// 编译错误</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>var</code> 语句可以声明一个变量列表，类型在变量名之后</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a,b,c <span class="keyword">int</span>   <span class="comment">// a = 0, b = 0, c = 0</span></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="keyword">int</span>       <span class="comment">// a = 0</span></span><br><span class="line">    b <span class="keyword">string</span>    <span class="comment">// b = &quot;&quot;</span></span><br><span class="line">    c <span class="keyword">uint</span>      <span class="comment">// c = 0</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a,b,c <span class="keyword">int</span></span><br><span class="line">    d <span class="keyword">string</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>变量定义时初始化赋值，每个变量对应一个值</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> a, b <span class="keyword">int</span> = <span class="number">0</span>, <span class="number">1</span></span><br></pre></td></tr></table></figure></li>
<li><p>变量定义并初始化时可以省略类型，Go自动根据初始值推导变量的类型</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;A&#x27;</span>         <span class="comment">// a int32</span></span><br><span class="line"><span class="keyword">var</span> a,b = <span class="number">0</span>, <span class="string">&quot;B&quot;</span>    <span class="comment">// a int, b string</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用组合符号<code>:=</code>定义并初始化变量，根据符号右边表达式的值的类型声明变量并初始化它的值<br><code>:=</code> 不能在函数外使用，函数外的每个语法块都必须以关键字开始</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a := <span class="number">3</span>                     <span class="comment">// a int</span></span><br><span class="line">a, b, c := <span class="number">8</span>, <span class="string">&#x27;呴&#x27;</span>, <span class="literal">true</span>   <span class="comment">// a int, b int32, c bool</span></span><br><span class="line">c := <span class="string">`formatted</span></span><br><span class="line"><span class="string"> string`</span>                   <span class="comment">// c string</span></span><br><span class="line">c := <span class="number">1</span> + <span class="number">2i</span>                <span class="comment">// c complex128</span></span><br></pre></td></tr></table></figure>
<h3 id="常量-Constant"><a href="#常量-Constant" class="headerlink" title="常量 Constant"></a><span id="常量-constant"><strong>常量 Constant</strong></span></h3></li>
<li><p>常量可以是字符、字符串、布尔或数值类型的值，数值常量是高精度的值</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x <span class="keyword">int</span> = <span class="number">3</span></span><br><span class="line"><span class="keyword">const</span> y,z <span class="keyword">int</span> = <span class="number">1</span>,<span class="number">2</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a <span class="keyword">byte</span> = <span class="string">&#x27;A&#x27;</span></span><br><span class="line">    b <span class="keyword">string</span> = <span class="string">&quot;B&quot;</span></span><br><span class="line">    c <span class="keyword">bool</span> = <span class="literal">true</span></span><br><span class="line">    d <span class="keyword">int</span> = <span class="number">4</span></span><br><span class="line">    e <span class="keyword">float32</span> = <span class="number">5.1</span></span><br><span class="line">    f <span class="keyword">complex64</span> = <span class="number">6</span> + <span class="number">6i</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>根据常量值自动推导类型</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">0</span>        <span class="comment">// a int</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    b = <span class="number">2.3</span>        <span class="comment">// b float64</span></span><br><span class="line">    c = <span class="literal">true</span>       <span class="comment">// c bool</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>常量组内定义时复用表达式<br>常量组内定义的常量只有名称时，其值会根据上一次最后出现的常量表达式计算相同的类型与值</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="number">3</span>               <span class="comment">// a = 3</span></span><br><span class="line">    b                   <span class="comment">// b = 3</span></span><br><span class="line">    c                   <span class="comment">// c = 3</span></span><br><span class="line">    d = <span class="built_in">len</span>(<span class="string">&quot;asdf&quot;</span>)     <span class="comment">// d = 4</span></span><br><span class="line">    e                   <span class="comment">// e = 4</span></span><br><span class="line">    f                   <span class="comment">// f = 4</span></span><br><span class="line">    g,h,i = <span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>       <span class="comment">// 复用表达式要一一对应</span></span><br><span class="line">    x,y,z               <span class="comment">// x = 7, y = 8, z = 9</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>自动递增枚举常量 <code>iota</code><br>iota的枚举值可以赋值给数值兼容类型<br>每个常量单独声明时，<code>iota</code>不会自动递增</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a <span class="keyword">int</span> = <span class="literal">iota</span>        <span class="comment">// a = 0</span></span><br><span class="line"><span class="keyword">const</span> b <span class="keyword">int</span> = <span class="literal">iota</span>        <span class="comment">// b = 0</span></span><br><span class="line"><span class="keyword">const</span> c <span class="keyword">byte</span> = <span class="literal">iota</span>       <span class="comment">// c = 0</span></span><br><span class="line"><span class="keyword">const</span> d <span class="keyword">uint64</span> = <span class="literal">iota</span>     <span class="comment">// d = 0</span></span><br></pre></td></tr></table></figure></li>
<li><p>常量组合声明时，<code>iota</code>每次引用会逐步自增，初始值为0，步进值为1</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a <span class="keyword">uint8</span> = <span class="literal">iota</span>        <span class="comment">// a = 0</span></span><br><span class="line">    b <span class="keyword">int16</span> = <span class="literal">iota</span>        <span class="comment">// b = 1</span></span><br><span class="line">    c <span class="keyword">rune</span> = <span class="literal">iota</span>         <span class="comment">// c = 2</span></span><br><span class="line">    d <span class="keyword">float64</span> = <span class="literal">iota</span>      <span class="comment">// d = 3</span></span><br><span class="line">    e <span class="keyword">uintptr</span> = <span class="literal">iota</span>      <span class="comment">// e = 4</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>即使<code>iota</code>不是在常量组内第一个开始引用，也会按组内常量数量递增</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="string">&quot;A&quot;</span></span><br><span class="line">    b = <span class="string">&#x27;B&#x27;</span></span><br><span class="line">    c = <span class="literal">iota</span>    <span class="comment">// c = 2</span></span><br><span class="line">    d = <span class="string">&quot;D&quot;</span></span><br><span class="line">    e = <span class="literal">iota</span>    <span class="comment">// e = 4</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>枚举的常量都为同一类型时，可以使用简单序列格式(组内复用表达式).</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="literal">iota</span>     <span class="comment">// a int32 = 0</span></span><br><span class="line">    b            <span class="comment">// b int32 = 1</span></span><br><span class="line">    c            <span class="comment">// c int32 = 2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>枚举序列中的未指定类型的常量会跟随序列前面最后一次出现类型定义的类型</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a <span class="keyword">byte</span> = <span class="literal">iota</span>    <span class="comment">// a uint8 = 0</span></span><br><span class="line">    b                <span class="comment">// b uint8 = 1</span></span><br><span class="line">    c                <span class="comment">// c uint8 = 2</span></span><br><span class="line">    d <span class="keyword">rune</span> = <span class="literal">iota</span>    <span class="comment">// d int32 = 3</span></span><br><span class="line">    e                <span class="comment">// e int32 = 4</span></span><br><span class="line">    f                <span class="comment">// f int32 = 5</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p><code>iota</code>自增值只在一个常量定义组合中有效，跳出常量组合定义后<code>iota</code>初始值归0</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="literal">iota</span>     <span class="comment">// a int32 = 0</span></span><br><span class="line">    b            <span class="comment">// b int32 = 1</span></span><br><span class="line">    c            <span class="comment">// c int32 = 2</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    e = <span class="literal">iota</span>     <span class="comment">// e int32 = 0    (iota重新初始化并自增)</span></span><br><span class="line">    f            <span class="comment">// f int32 = 1</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>定制<code>iota</code>序列初始值与步进值 (通过组合内复用表达式实现)</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = (<span class="literal">iota</span> + <span class="number">2</span>) * <span class="number">3</span>    <span class="comment">// a int32 = 6    (a=(0+2)*3) 初始值为6,步进值为3</span></span><br><span class="line">    b                     <span class="comment">// b int32 = 9    (b=(1+2)*3)</span></span><br><span class="line">    c                     <span class="comment">// c int32 = 12    (c=(2+2)*3)</span></span><br><span class="line">    d                     <span class="comment">// d int32 = 15    (d=(3+2)*3)</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="数组-Array"><a href="#数组-Array" class="headerlink" title="数组 Array"></a><span id="数组-array"><strong>数组 Array</strong></span></h3></li>
<li><p>数组声明带有长度信息且长度固定，数组是值类型默认零值不是<code>nil</code>，传递参数时会进行复制。<br>声明定义数组时中括号<code>[ ]</code>在类型名称之前，赋值引用元素时中括号<code>[ ]</code>在数组变量名之后。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a [<span class="number">3</span>]<span class="keyword">int</span> = [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;                         <span class="comment">// a = [0 1 2]</span></span><br><span class="line"><span class="keyword">var</span> b [<span class="number">3</span>]<span class="keyword">int</span> = [<span class="number">3</span>]<span class="keyword">int</span>&#123;&#125;                                <span class="comment">// b = [0 0 0]</span></span><br><span class="line"><span class="keyword">var</span> c [<span class="number">3</span>]<span class="keyword">int</span></span><br><span class="line">c = [<span class="number">3</span>]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">c = [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;                                      <span class="comment">// c = [0 0 0]</span></span><br><span class="line">d := [<span class="number">3</span>]<span class="keyword">int</span>&#123;&#125;                                          <span class="comment">// d = [0 0 0]</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%T\t%#v\t%d\t%d\n&quot;</span>, d, d, <span class="built_in">len</span>(d), <span class="built_in">cap</span>(d))  <span class="comment">// [3]int    [3]int&#123;0, 0, 0&#125;    3    3</span></span><br></pre></td></tr></table></figure>

<p>使用<code>...</code>自动计算数组的长度</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [...]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多维数组只能自动计算最外围数组长度</span></span><br><span class="line">x := [...][<span class="number">3</span>]<span class="keyword">int</span>&#123;&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;, &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;&#125;</span><br><span class="line">y := [...][<span class="number">2</span>][<span class="number">2</span>]<span class="keyword">int</span>&#123;&#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">2</span>,<span class="number">3</span>&#125;&#125;,&#123;&#123;<span class="number">4</span>,<span class="number">5</span>&#125;,&#123;<span class="number">6</span>,<span class="number">7</span>&#125;&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过下标访问数组元素</span></span><br><span class="line"><span class="built_in">println</span>(y[<span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>])                                    <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<p>初始化指定索引的数组元素，未指定初始化的元素保持默认零值</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">2</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = [...]<span class="keyword">string</span>&#123;<span class="number">2</span>:<span class="string">&quot;c&quot;</span>, <span class="number">3</span>:<span class="string">&quot;d&quot;</span>&#125;</span><br></pre></td></tr></table></figure>
<h3 id="切片-Slice"><a href="#切片-Slice" class="headerlink" title="切片 Slice"></a><span id="切片-slice"><strong>切片 Slice</strong></span></h3></li>
<li><p>slice 切片是对一个数组上的连续一段的引用，并且同时包含了长度和容量信息<br>因为是引用类型，所以未初始化时的默认零值是<code>nil</code>，长度与容量都是0</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a []<span class="keyword">int</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%T\t%#v\t%d\t%d\n&quot;</span>, a, a, <span class="built_in">len</span>(a), <span class="built_in">cap</span>(a))    <span class="comment">// []int    []int(nil)    0    0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可用类似数组的方式初始化slice</span></span><br><span class="line"><span class="keyword">var</span> d []<span class="keyword">int</span> = []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%T\t%#v\t%d\t%d\n&quot;</span>, d, d, <span class="built_in">len</span>(d), <span class="built_in">cap</span>(d))    <span class="comment">// []int    []int&#123;0, 1, 2&#125;    3    3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> e = []<span class="keyword">string</span>&#123;<span class="number">2</span>:<span class="string">&quot;c&quot;</span>, <span class="number">3</span>:<span class="string">&quot;d&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p>使用内置函数make初始化slice，第一参数是slice类型，第二参数是长度，第三参数是容量(省略时与长度相同)</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%T\t%#v\t%d\t%d\n&quot;</span>, b, b, <span class="built_in">len</span>(b), <span class="built_in">cap</span>(b))    <span class="comment">// []int    []int&#123;&#125;    0    0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">3</span>, <span class="number">10</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%T\t%#v\t%d\t%d\n&quot;</span>, c, c, <span class="built_in">len</span>(c), <span class="built_in">cap</span>(c))    <span class="comment">// []int    []int&#123;&#125;    3    10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">new</span>([]<span class="keyword">int</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%T\t%#v\t%d\t%d\n&quot;</span>, a, a, <span class="built_in">len</span>(*a), <span class="built_in">cap</span>(*a))  <span class="comment">// *[]int    &amp;[]int(nil)    0    0</span></span><br></pre></td></tr></table></figure></li>
<li><p>基于slice或数组重新切片，创建一个新的 slice 值指向相同的数组<br>重新切片支持两种格式：  </p>
<p>2个参数 <code>slice[beginIndex:endIndex]</code><br>需要满足条件：0 &lt;= beginIndex &lt;= endIndex &lt;= cap(slice)<br>截取从开始索引到结束索引-1 之间的片段<br>新slice的长度：<code>length=(endIndex - beginIndex)</code><br>新slice的容量：<code>capacity=(cap(slice) - beginIndex)</code><br>beginIndex的值可省略，默认为0<br>endIndex 的值可省略，默认为len(slice)</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s := []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">a := s[<span class="number">1</span>:<span class="number">3</span>]            <span class="comment">// a: [1 2],  len: 2,  cap:  4</span></span><br><span class="line">b := s[:<span class="number">4</span>]             <span class="comment">// b: [0 1 2 3],  len: 4,  cap:  5</span></span><br><span class="line">c := s[<span class="number">1</span>:]             <span class="comment">// c: [1 2 3 4],  len: 4,  cap:  4</span></span><br><span class="line">d := s[<span class="number">1</span>:<span class="number">1</span>]            <span class="comment">// d: [],  len: 0,  cap:  4</span></span><br><span class="line">e := s[:]              <span class="comment">// e: [0 1 2 3 4],  len: 5,  cap:  5</span></span><br></pre></td></tr></table></figure>
<p>3个参数 <code>slice[beginIndex:endIndex:capIndex]</code> <code>Go1.2+</code><br>需要满足条件：0 &lt;= beginIndex &lt;= endIndex &lt;= capIndex &lt;= cap(slice)<br>新slice的长度：<code>length=(endIndex - beginIndex)</code><br>新slice的容量：<code>capacity=(capIndex - beginIndex)</code><br>beginIndex的值可省略，默认为0  </p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">a := s[<span class="number">9</span>:<span class="number">10</span>:<span class="number">10</span>]        <span class="comment">// a: [0],  len: 1,  cap:  1</span></span><br><span class="line">b := s[:<span class="number">3</span>:<span class="number">5</span>]           <span class="comment">// b: [0 0 0],  len: 3,  cap:  5</span></span><br></pre></td></tr></table></figure></li>
<li><p>向slice中追加/修改元素</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">s := []<span class="keyword">string</span>&#123;&#125;</span><br><span class="line">s = <span class="built_in">append</span>(s, <span class="string">&quot;a&quot;</span>)              <span class="comment">// 添加一个元素</span></span><br><span class="line">s = <span class="built_in">append</span>(s, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>)    <span class="comment">// 添加一列元素</span></span><br><span class="line">t = []<span class="keyword">string</span>&#123;<span class="string">&quot;e&quot;</span>, <span class="string">&quot;f&quot;</span>, <span class="string">&quot;g&quot;</span>&#125;</span><br><span class="line">s = <span class="built_in">append</span>(s, t...&#125;             <span class="comment">// 添加另一个切片t的所有元素</span></span><br><span class="line">s = <span class="built_in">append</span>(s, t[:<span class="number">2</span>]...&#125;         <span class="comment">// 添加另一个切片t的部分元素</span></span><br><span class="line"></span><br><span class="line">s[<span class="number">0</span>] = <span class="string">&quot;A&quot;</span>                      <span class="comment">// 修改切片s的第一个元素</span></span><br><span class="line">s[<span class="built_in">len</span>(s)<span class="number">-1</span>] = <span class="string">&quot;G&quot;</span>               <span class="comment">// 修改切片s的最后一个元素</span></span><br></pre></td></tr></table></figure></li>
<li><p>向slice指定位置插入元素，从slice中删除指定的元素<br>因为slice引用指向底层数组，数组的长度不变元素是不能插入/删除的<br>插入的原理就是从插入的位置将切片分为两部分依次将首部、新元素、尾部拼接为一个新的切片<br>删除的原理就是排除待删除元素后用其他元素重新构造一个数组</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">insertSlice</span><span class="params">(s []<span class="keyword">int</span>, i <span class="keyword">int</span>, elements ...<span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">   <span class="comment">// x := append(s[:i], append(elements, s[i:]...)...)</span></span><br><span class="line">   x := s[:i]</span><br><span class="line"> x = <span class="built_in">append</span>(x, elements...)</span><br><span class="line">    x = <span class="built_in">append</span>(x, s[i:]...)</span><br><span class="line"> <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteByAppend</span><span class="params">()</span></span> &#123;</span><br><span class="line">    i := <span class="number">3</span></span><br><span class="line">    s := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</span><br><span class="line">    <span class="comment">// delete the fourth element(index is 3), using append</span></span><br><span class="line">    s = <span class="built_in">append</span>(s[:i], s[i+<span class="number">1</span>:]...)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteByCopy</span><span class="params">()</span></span> &#123;</span><br><span class="line">    i := <span class="number">3</span></span><br><span class="line">    s := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</span><br><span class="line">    <span class="comment">// delete the fourth element(index is 3), using copy</span></span><br><span class="line">    <span class="built_in">copy</span>(s[i:], s[i+<span class="number">1</span>:])</span><br><span class="line">    s = s[:<span class="built_in">len</span>(s)<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="字典-映射-Map"><a href="#字典-映射-Map" class="headerlink" title="字典/映射 Map"></a><span id="字典映射-map"><strong>字典/映射 Map</strong></span></h3></li>
<li><p>map是引用类型，使用内置函数 <code>make</code>进行初始化，未初始化的map零值为 <code>nil</code>长度为0，并且不能赋值元素</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span></span><br><span class="line">m[<span class="number">0</span>] = <span class="number">0</span>                              <span class="comment">// × runtime error: assignment to entry in nil map</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;type: %T\n&quot;</span>, m)           <span class="comment">// map[int]int</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;value: %#v\n&quot;</span>, m)         <span class="comment">// map[int]int(nil)</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;value: %v\n&quot;</span>, m)          <span class="comment">// map[]</span></span><br><span class="line">fmt.Println(<span class="string">&quot;is nil: &quot;</span>, <span class="literal">nil</span> == m)     <span class="comment">// true</span></span><br><span class="line">fmt.Println(<span class="string">&quot;length: &quot;</span>, <span class="built_in">len</span>(m))       <span class="comment">// 0，if m is nil, len(m) is zero.</span></span><br></pre></td></tr></table></figure>

<p>使用内置函数make初始化map</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span> = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>)</span><br><span class="line">m[<span class="number">0</span>] = <span class="number">0</span>                              <span class="comment">// 插入或修改元素</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;type: %T\n&quot;</span>, m)           <span class="comment">// map[int]int</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;value: %#v\n&quot;</span>, m)         <span class="comment">// map[int]int(0:0)</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;value: %v\n&quot;</span>, m)          <span class="comment">// map[0:0]</span></span><br><span class="line">fmt.Println(<span class="string">&quot;is nil: &quot;</span>, <span class="literal">nil</span> == m)     <span class="comment">// false</span></span><br><span class="line">fmt.Println(<span class="string">&quot;length: &quot;</span>, <span class="built_in">len</span>(m))       <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>直接赋值初始化map</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>&#123;</span><br><span class="line"><span class="number">0</span>:<span class="number">0</span>,</span><br><span class="line"><span class="number">1</span>:<span class="number">1</span>,                                  <span class="comment">// 最后的逗号是必须的</span></span><br><span class="line">&#125;</span><br><span class="line">n := <span class="keyword">map</span>[<span class="keyword">string</span>]S&#123;</span><br><span class="line"><span class="string">&quot;a&quot;</span>:S&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line"><span class="string">&quot;b&quot;</span>:&#123;<span class="number">2</span>,<span class="number">3</span>&#125;,                            <span class="comment">// 类型名称可省略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>map的使用：读取、添加、修改、删除元素</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">m[<span class="number">0</span>] = <span class="number">3</span>                              <span class="comment">// 修改m中key为0的值为3</span></span><br><span class="line">m[<span class="number">4</span>] = <span class="number">8</span>                              <span class="comment">// 添加到m中key为4值为8</span></span><br><span class="line"></span><br><span class="line">a := n[<span class="string">&quot;a&quot;</span>]                           <span class="comment">// 获取n中key为“a“的值</span></span><br><span class="line">b, ok := n[<span class="string">&quot;c&quot;</span>]                       <span class="comment">// 取值, 并通过ok(bool)判断key对应的元素是否存在.</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">delete</span>(n, <span class="string">&quot;a&quot;</span>)                        <span class="comment">// 使用内置函数delete删除key为”a“对应的元素.</span></span><br></pre></td></tr></table></figure>
<h3 id="结构体-Struct"><a href="#结构体-Struct" class="headerlink" title="结构体 Struct"></a><span id="结构体-struct"><strong>结构体 Struct</strong></span></h3></li>
<li><p>结构体类型<code>struct</code>是一个字段的集合</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> S <span class="keyword">struct</span> &#123;</span><br><span class="line">    A <span class="keyword">int</span></span><br><span class="line">    B, c <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>结构体初始化通过结构体字段的值作为列表来新分配一个结构体。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s S = S&#123;<span class="number">0</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用 Name: 语法可以仅列出部分字段(字段名的顺序无关)</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s S = S&#123;B: <span class="string">&quot;1&quot;</span>, A: <span class="number">0</span>&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>结构体是值类型，传递时会复制值，其默认零值不是<code>nil</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a S</span><br><span class="line"><span class="keyword">var</span> b = S&#123;&#125;</span><br><span class="line">fmt.Println(a == b)    <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li>
<li><p>结构体组合<br>将一个<code>命名类型</code>作为匿名字段嵌入一个结构体<br>嵌入匿名字段支持命名类型、命名类型的指针和接口类型</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> (</span><br><span class="line">    A <span class="keyword">struct</span> &#123;</span><br><span class="line">        v <span class="keyword">int</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义结构体B，嵌入结构体A作为匿名字段</span></span><br><span class="line">    B <span class="keyword">struct</span> &#123;</span><br><span class="line">        A</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义结构体C，嵌入结构体A的指针作为匿名字段</span></span><br><span class="line">    C <span class="keyword">struct</span> &#123;</span><br><span class="line">        *A</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *A)</span> <span class="title">setV</span><span class="params">(v <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    a.v = v</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a A)</span> <span class="title">getV</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a.v</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b B)</span> <span class="title">getV</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;B&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *C)</span> <span class="title">getV</span><span class="params">()</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := A&#123;&#125;</span><br><span class="line">    b := B&#123;&#125;    <span class="comment">// 初始化结构体B，其内匿名字段A默认零值是A&#123;&#125;</span></span><br><span class="line">    c := C&#123;&amp;A&#123;&#125;&#125;    <span class="comment">// 初始化结构体C，其内匿名指针字段*A默认零值是nil，需要初始化赋值</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">println</span>(a.v)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 结构体A嵌入B，A内字段自动提升到B</span></span><br><span class="line">    <span class="built_in">println</span>(b.v)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 结构体指针*A嵌入C，*A对应结构体内字段自动提升到C</span></span><br><span class="line">    <span class="built_in">println</span>(c.v)</span><br><span class="line"></span><br><span class="line">    a.setV(<span class="number">3</span>)</span><br><span class="line">    b.setV(<span class="number">5</span>)</span><br><span class="line">    c.setV(<span class="number">7</span>)</span><br><span class="line">    <span class="built_in">println</span>(a.getV(), b.A.getV(), c.A.getV())</span><br><span class="line">    <span class="built_in">println</span>(a.getV(), b.getV(), c.getV())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>匿名结构体<br>匿名结构体声明时省略了<code>type</code>关键字，并且没有名称</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Integer <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明变量a为空的匿名结构体类型</span></span><br><span class="line"><span class="keyword">var</span> a <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明变量b为包含一个字段的匿名结构体类型</span></span><br><span class="line"><span class="keyword">var</span> b <span class="keyword">struct</span>&#123; x <span class="keyword">int</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明变量c为包含两个字段的匿名结构体类型</span></span><br><span class="line"><span class="keyword">var</span> c <span class="keyword">struct</span> &#123;</span><br><span class="line">    u <span class="keyword">int</span></span><br><span class="line">    v <span class="keyword">bool</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    printa(a)</span><br><span class="line">    b.x = <span class="number">1</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;bx: %#v\n&quot;</span>, printb(b))    <span class="comment">// bx: struct &#123; y uint8 &#125;&#123;y:0x19&#125;</span></span><br><span class="line">    printc(c)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 声明d为包含3个字段的匿名结构体并初始化部分字段</span></span><br><span class="line">    d := <span class="keyword">struct</span> &#123;</span><br><span class="line">        x <span class="keyword">int</span></span><br><span class="line">        y <span class="keyword">complex64</span></span><br><span class="line">        z <span class="keyword">string</span></span><br><span class="line">    &#125;&#123;</span><br><span class="line">        z: <span class="string">&quot;asdf&quot;</span>,</span><br><span class="line">        x: <span class="number">111</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    d.y = <span class="number">22</span> + <span class="number">333i</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;d: %#v\n&quot;</span>, d)    <span class="comment">// d: struct &#123; x int; y complex64; z string &#125;&#123;x:111, y:(22+333i), z:&quot;asdf&quot;&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 声明变量e为包含两个字段的匿名结构体类型</span></span><br><span class="line">    <span class="comment">// 包含1个匿名结构体类型的命名字段和1个命名类型的匿名字段</span></span><br><span class="line">    e := <span class="keyword">struct</span> &#123;</span><br><span class="line">        a <span class="keyword">struct</span>&#123; x <span class="keyword">int</span> &#125;</span><br><span class="line">        <span class="comment">// 结构体组合嵌入匿名字段只支持命名类型</span></span><br><span class="line">        Integer</span><br><span class="line">    &#125;&#123;&#125;</span><br><span class="line">    e.Integer = <span class="number">444</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;e: %#v\n&quot;</span>, e)    <span class="comment">// e: struct &#123; a struct &#123; x int &#125;; main.Integer &#125;&#123;a:struct &#123; x int &#125;&#123;x:0&#125;, Integer:444&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数参数为匿名结构体类型时，传入参数类型声明必须保持一致</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printa</span><span class="params">(s <span class="keyword">struct</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;a: %#v\n&quot;</span>, s)    <span class="comment">// a: struct &#123;&#125;&#123;&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数入参和返回值都支持匿名结构体类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printb</span><span class="params">(s <span class="keyword">struct</span>&#123; x <span class="keyword">int</span> &#125;)</span> <span class="params">(x <span class="keyword">struct</span>&#123; y <span class="keyword">byte</span> &#125;)</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;b: %#v\n&quot;</span>, s)    <span class="comment">// b: struct &#123; x int &#125;&#123;x:1&#125;</span></span><br><span class="line">    x.y = <span class="number">25</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printc</span><span class="params">(s <span class="keyword">struct</span> &#123;u <span class="keyword">int</span>; v <span class="keyword">bool</span> &#125;)</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;c: %#v\n&quot;</span>, s)    <span class="comment">// c: struct &#123; u int; v bool &#125;&#123;u:0, v:false&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="指针-Pointer"><a href="#指针-Pointer" class="headerlink" title="指针 Pointer"></a><span id="指针-pointer"><strong>指针 Pointer</strong></span></h3></li>
<li><p>通过取地址操作符<code>&amp;</code>获取指向值/引用对象的指针。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">1</span></span><br><span class="line">pi := &amp;i    <span class="comment">// 指向数值的指针</span></span><br><span class="line"></span><br><span class="line">a := []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">pa := &amp;a    <span class="comment">// 指向引用对象的指针</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s *S = &amp;S&#123;<span class="number">0</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>&#125;    <span class="comment">// 指向值对象的指针</span></span><br></pre></td></tr></table></figure></li>
<li><p>内置函数<code>new(T)</code>分配了一个零初始化的 T 值，并返回指向它的指针</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br><span class="line"><span class="keyword">var</span> s *S = <span class="built_in">new</span>(S)</span><br></pre></td></tr></table></figure></li>
<li><p>使用<code>*</code>读取/修改指针指向的值</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    i := <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br><span class="line">    *i = <span class="number">3</span></span><br><span class="line">    <span class="built_in">println</span>(i, *i)    <span class="comment">// 0xc208031f80    3</span></span><br><span class="line"></span><br><span class="line">    i = <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br><span class="line">    <span class="built_in">println</span>(i, *i)    <span class="comment">// 0xc208031f78    0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>指针使用点号来访问结构体字段<br>结构体字段/方法可以通过结构体指针来访问，通过指针间接的访问是透明的。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(s.A)</span><br><span class="line">fmt.Println((*s).A)</span><br></pre></td></tr></table></figure></li>
<li><p>指针的指针</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> i <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">var</span> p *<span class="keyword">int</span></span><br><span class="line">    <span class="keyword">var</span> pp **<span class="keyword">int</span></span><br><span class="line">    <span class="keyword">var</span> ppp ***<span class="keyword">int</span></span><br><span class="line">    <span class="keyword">var</span> pppp ****<span class="keyword">int</span></span><br><span class="line">    <span class="built_in">println</span>(i, p, pp, ppp, pppp)    <span class="comment">// 0 0x0 0x0 0x0 0x0</span></span><br><span class="line"></span><br><span class="line">    i, p, pp, ppp, pppp = <span class="number">123</span>, &amp;i, &amp;p, &amp;pp, &amp;ppp</span><br><span class="line">    <span class="built_in">println</span>(i, p, pp, ppp, pppp)    <span class="comment">// 123 0xc208031f68 0xc208031f88 0xc208031f80 0xc208031f78</span></span><br><span class="line">    <span class="built_in">println</span>(i, *p, **pp, ***ppp, ****pppp)    <span class="comment">// 123 123 123 123 123</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>跨层指针元素的使用<br>在指针引用多层对象时，指针是针对引用表达式的最后一位元素。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> a</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> X <span class="keyword">struct</span> &#123;</span><br><span class="line">    A Y</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Y <span class="keyword">struct</span> &#123;</span><br><span class="line">    B Z</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Z <span class="keyword">struct</span> &#123;</span><br><span class="line">    C <span class="keyword">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;a&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x = a.X&#123;&#125;</span><br><span class="line">    <span class="keyword">var</span> p = &amp;x</span><br><span class="line">    fmt.Println(<span class="string">&quot;x: &quot;</span>, x)    <span class="comment">// x:  &#123;&#123;&#123;0&#125;&#125;&#125;</span></span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;p: &quot;</span>, p)    <span class="comment">// p:  0xc208055f20</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;*p: &quot;</span>, *p)    <span class="comment">// *p:  &#123;&#123;&#123;0&#125;&#125;&#125;</span></span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;x.A.B.C: &quot;</span>, x.A.B.C)    <span class="comment">// x.A.B.C:  0</span></span><br><span class="line">    <span class="comment">//  println(&quot;*p.A.B.C: &quot;, *p.A.B.C)    // invalid indirect of p.A.B.C (type int)</span></span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;(*p).A.B.C: &quot;</span>, (*p).A.B.C)    <span class="comment">// (*p).A.B.C:  0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Go的指针没有指针运算，但是 <strong>道高一尺，魔高一丈</strong><br><a target="_blank" rel="noopener" href="http://1234n.com/?post/rseosp">Go语言中的指针运算</a><br><a target="_blank" rel="noopener" href="http://my.oschina.net/goal/blog/193698">利用unsafe操作未导出变量</a></p>
</li>
</ul>
<h3 id="通道-Channel"><a href="#通道-Channel" class="headerlink" title="通道 Channel"></a><span id="通道-channel"><strong>通道 Channel</strong></span></h3><ul>
<li><p>channel用于两个goroutine之间传递指定类型的值来同步运行和通讯。<br>操作符<code>&lt;-</code>用于指定channel的方向，发送或接收。<br>如果未指定方向，则为双向channel。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c0 <span class="keyword">chan</span> <span class="keyword">int</span>      <span class="comment">// 可用来发送和接收int类型的值</span></span><br><span class="line"><span class="keyword">var</span> c1 <span class="keyword">chan</span>&lt;- <span class="keyword">int</span>    <span class="comment">// 可用来发送int类型的值</span></span><br><span class="line"><span class="keyword">var</span> c2 &lt;-<span class="keyword">chan</span> <span class="keyword">int</span>    <span class="comment">// 可用来接收int类型的值</span></span><br></pre></td></tr></table></figure></li>
<li><p>channel是引用类型，使用<code>make</code>函数来初始化。<br>未初始化的channel零值是<code>nil</code>，且不能用于发送和接收值。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c0 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)        <span class="comment">// 不带缓冲的int类型channel</span></span><br><span class="line">c1 := <span class="built_in">make</span>(<span class="keyword">chan</span> *<span class="keyword">int</span>, <span class="number">10</span>)    <span class="comment">// 带缓冲的*int类型指针channel</span></span><br></pre></td></tr></table></figure>
<p>无缓冲的channe中有值时发送方会阻塞，直到接收方从channel中取出值。<br>带缓冲的channel在缓冲区已满时发送方会阻塞，直到接收方从channel中取出值。<br>接收方在channel中无值会一直阻塞。</p>
</li>
<li><p>通过channel发送一个值时，<code>&lt;-</code>作为二元操作符使用，  </p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c0 &lt;- <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>通过channel接收一个值时，<code>&lt;-</code>作为一元操作符使用。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i := &lt;-c1</span><br></pre></td></tr></table></figure></li>
<li><p>关闭channel，只能用于双向或只发送类型的channel<br>只能由 <strong>发送方</strong>调用<code>close</code>函数来关闭channel<br>接收方取出已关闭的channel中发送的值后，后续再从channel中取值时会以非阻塞的方式立即返回channel传递类型的零值。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发送方，发送值后关闭channel</span></span><br><span class="line">ch &lt;- <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">close</span>(ch)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收方，取出发送的值</span></span><br><span class="line">fmt.Println(&lt;-ch)    <span class="comment">// 输出： “hello”</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 再次从已关闭的channel中取值，返回channel传递类型的零值</span></span><br><span class="line">fmt.Println(&lt;-ch)    <span class="comment">// 输出： 零值，空字符串“”</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收方判断接收到的零值是由发送方发送的还是关闭channel返回的默认值</span></span><br><span class="line">s, ok := &lt;-ch</span><br><span class="line"><span class="keyword">if</span> ok &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Receive value from sender:&quot;</span>, s)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Get zero value from closed channel&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 向已关闭的通道发送值会产生运行时恐慌panic</span></span><br><span class="line">ch &lt;- <span class="string">&quot;hi&quot;</span></span><br><span class="line"><span class="comment">// 再次关闭已经关闭的通道也会产生运行时恐慌panic</span></span><br><span class="line"><span class="built_in">close</span>(ch)</span><br></pre></td></tr></table></figure></li>
<li><p>使用<code>for range</code>语句依次读取发送到channel的值，直到channel关闭。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 无缓冲和有缓冲的channel的range用法相同</span></span><br><span class="line">    <span class="keyword">var</span> ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)    <span class="comment">// make(chan int, 2) 或 make(chan int , 100)</span></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">            ch &lt;- i</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">close</span>(ch)</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// channel中无发送值且未关闭时会阻塞</span></span><br><span class="line">    <span class="keyword">for</span> x := <span class="keyword">range</span> ch &#123;</span><br><span class="line">        fmt.Println(x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面方式与for range用法效果相同</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">loop:</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        <span class="keyword">select</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> x, ok := &lt;-c:</span><br><span class="line">            <span class="keyword">if</span> !ok &#123;</span><br><span class="line">                <span class="keyword">break</span> loop</span><br><span class="line">            &#125;</span><br><span class="line">            fmt.Println(x)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="接口-Interface"><a href="#接口-Interface" class="headerlink" title="接口 Interface"></a><span id="接口-interface"><strong>接口 Interface</strong></span></h3></li>
<li><p>接口类型是由一组方法定义的集合。<br>接口类型的值可以存放实现这些方法的任何值。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Abser <span class="keyword">interface</span> &#123;</span><br><span class="line">    Abs() <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>类型通过实现定义的方法来实现接口， 不需要显式声明实现某接口。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyFloat <span class="keyword">float64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f MyFloat)</span> <span class="title">Abs</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> f &lt; <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">float64</span>(-f)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">float64</span>(f)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>接口组合</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">    Read(b []<span class="keyword">byte</span>) (n <span class="keyword">int</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> &#123;</span><br><span class="line">    Write(b []<span class="keyword">byte</span>) (n <span class="keyword">int</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接口ReadWriter组合了Reader和Writer两个接口</span></span><br><span class="line"><span class="keyword">type</span> ReadWriter <span class="keyword">interface</span> &#123;</span><br><span class="line">    Reader</span><br><span class="line">    Writer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> File <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span> <span class="title">Read</span><span class="params">(b []<span class="keyword">byte</span>)</span> <span class="params">(n <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;Read&quot;</span>, <span class="built_in">len</span>(b),<span class="string">&quot;bytes data.&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *File)</span> <span class="title">Write</span><span class="params">(b []<span class="keyword">byte</span>)</span> <span class="params">(n <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;Write&quot;</span>, <span class="built_in">len</span>(b),<span class="string">&quot;bytes data.&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// *File 实现了Read方法和Write方法，所以实现了Reader接口和Writer接口以及组合接口ReadWriter</span></span><br><span class="line">    <span class="keyword">var</span> f *File = &amp;File&#123;&#125;</span><br><span class="line">    <span class="keyword">var</span> r Reader = f</span><br><span class="line">    <span class="keyword">var</span> w Writer = f</span><br><span class="line">    <span class="keyword">var</span> rw ReadWriter = f</span><br><span class="line">    bs := []<span class="keyword">byte</span>(<span class="string">&quot;asdf&quot;</span>)</span><br><span class="line">    r.Read(bs)</span><br><span class="line">    rw.Read(bs)</span><br><span class="line">    w.Write(bs)</span><br><span class="line">    rw.Write(bs)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>内置接口类型<code>error</code>是一个用于表示错误情况的常规接口，其零值<code>nil</code>表示没有错误<br>所有实现了<code>Error</code>方法的类型都能表示为一个错误</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> error <span class="keyword">interface</span> &#123;</span><br><span class="line">    Error() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自定义类型"><a href="#自定义类型" class="headerlink" title="自定义类型"></a><span id="自定义类型"><strong>自定义类型</strong></span></h3></li>
<li><p>Go中支持自定义的类型可基于： 基本类型、数组类型、切片类型、字典类型、函数类型、结构体类型、通道类型、接口类型以及自定义类型的类型</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> (</span><br><span class="line">    A <span class="keyword">int</span></span><br><span class="line">    B <span class="keyword">int8</span></span><br><span class="line">    C <span class="keyword">int16</span></span><br><span class="line">    D <span class="keyword">rune</span></span><br><span class="line">    E <span class="keyword">int32</span></span><br><span class="line">    F <span class="keyword">int64</span></span><br><span class="line">    G <span class="keyword">uint</span></span><br><span class="line">    H <span class="keyword">byte</span></span><br><span class="line">    I <span class="keyword">uint16</span></span><br><span class="line">    J <span class="keyword">uint32</span></span><br><span class="line">    K <span class="keyword">uint64</span></span><br><span class="line">    L <span class="keyword">float32</span></span><br><span class="line">    M <span class="keyword">float64</span></span><br><span class="line">    N <span class="keyword">complex64</span></span><br><span class="line">    O <span class="keyword">complex128</span></span><br><span class="line">    P <span class="keyword">uintptr</span></span><br><span class="line">    Q <span class="keyword">bool</span></span><br><span class="line">    R <span class="keyword">string</span></span><br><span class="line">    S [<span class="number">3</span>]<span class="keyword">uint8</span></span><br><span class="line">    T []<span class="keyword">complex128</span></span><br><span class="line">    U <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">uintptr</span></span><br><span class="line">    V <span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="params">(b <span class="keyword">bool</span>)</span></span></span><br><span class="line">    W <span class="keyword">struct</span> &#123;a, b <span class="keyword">int</span>&#125;</span><br><span class="line">    X <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line">    Y <span class="keyword">interface</span> &#123;&#125;</span><br><span class="line">    Z A</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>以及支持以上所有支持类型的指针类型</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> (</span><br><span class="line">    A *<span class="keyword">int</span></span><br><span class="line">    B *<span class="keyword">int8</span></span><br><span class="line">    C *<span class="keyword">int16</span></span><br><span class="line">    D *<span class="keyword">rune</span></span><br><span class="line">    E *<span class="keyword">int32</span></span><br><span class="line">    F *<span class="keyword">int64</span></span><br><span class="line">    G *<span class="keyword">uint</span></span><br><span class="line">    H *<span class="keyword">byte</span></span><br><span class="line">    I *<span class="keyword">uint16</span></span><br><span class="line">    J *<span class="keyword">uint32</span></span><br><span class="line">    K *<span class="keyword">uint64</span></span><br><span class="line">    L *<span class="keyword">float32</span></span><br><span class="line">    M *<span class="keyword">float64</span></span><br><span class="line">    N *<span class="keyword">complex64</span></span><br><span class="line">    O *<span class="keyword">complex128</span></span><br><span class="line">    P *<span class="keyword">uintptr</span></span><br><span class="line">    Q *<span class="keyword">bool</span></span><br><span class="line">    R *<span class="keyword">string</span></span><br><span class="line">    S *[<span class="number">3</span>]<span class="keyword">uint8</span></span><br><span class="line">    T *[]<span class="keyword">complex128</span></span><br><span class="line">    U *<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">uintptr</span></span><br><span class="line">    V *<span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="params">(b <span class="keyword">bool</span>)</span></span></span><br><span class="line">    W *<span class="keyword">struct</span> &#123;a, b <span class="keyword">int</span>&#125;</span><br><span class="line">    X *<span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line">    Y *<span class="keyword">interface</span> &#123;&#125;</span><br><span class="line">    Z *A</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>类型别名 <code>Go1.9+</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> (</span><br><span class="line">    A <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">    B <span class="keyword">struct</span>&#123;&#125; <span class="comment">// 定义两个结构相同的类型A，B</span></span><br><span class="line">    C = A      <span class="comment">// 定义类型A的别名</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        a A</span><br><span class="line">        b B</span><br><span class="line">        c C</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">// 因为类型名不同，所以a和b不是相同类型，此处编译错误</span></span><br><span class="line">    fmt.Println(a == b) <span class="comment">// invalid operation: a == b (mismatched types A and B)</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(a == c) <span class="comment">// true</span></span><br><span class="line">    a = C&#123;&#125;</span><br><span class="line">    c = A&#123;&#125;</span><br><span class="line">    fmt.Println(c == a) <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>强制类型转换</p>
<p>数据类型转换语法规则</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// T 为新的数据类型</span></span><br><span class="line">newDataTypeVariable = T(oldDataTypeVariable)</span><br></pre></td></tr></table></figure>
<p>数值类型转换</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">123</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">float64</span>(i)</span><br><span class="line"><span class="keyword">var</span> u = <span class="keyword">uint</span>(f)</span><br></pre></td></tr></table></figure>
<p>接口类型转换<br>任意类型的数据都可以转换为其类型已实现的接口类型</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> I <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x <span class="keyword">int</span> = <span class="number">123</span></span><br><span class="line"><span class="keyword">var</span> y = I(x)</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> s <span class="keyword">struct</span>&#123;a <span class="keyword">string</span>&#125;</span><br><span class="line"><span class="keyword">var</span> t = I(s)</span><br></pre></td></tr></table></figure>
<p>结构体类型转换 <code>Go1.8+</code><br>如果两个结构体包含的所有字段的名称和类型相同(忽略字段的标签差异)，则可以互相强制转换类型。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> T1 <span class="keyword">struct</span> &#123;</span><br><span class="line">    X <span class="keyword">int</span> <span class="string">`json:&quot;foo&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> T2 <span class="keyword">struct</span> &#123;</span><br><span class="line">    X <span class="keyword">int</span> <span class="string">`json:&quot;bar&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> v1 = T1&#123;X: <span class="number">123</span>&#125;</span><br><span class="line"><span class="keyword">var</span> v2 = T2(v1)</span><br></pre></td></tr></table></figure>
<h2 id="语句-Statement"><a href="#语句-Statement" class="headerlink" title="语句 Statement"></a><span id="语句-statement"><strong>语句 Statement</strong></span></h2></li>
</ul>
<h3 id="分号-括号"><a href="#分号-括号" class="headerlink" title="分号/括号 ; {"></a><span id="分号括号--"><strong>分号/括号 ; {</strong></span></h3><ul>
<li><p>Go是采用语法解析器自动在每行末尾增加分号，所以在写代码的时候可以省略分号。</p>
</li>
<li><p>Go编程中只有几个地方需要手工增加分号：<br>for循环使用分号把初始化、条件和遍历元素分开。<br>if/switch的条件判断带有初始化语句时使用分号分开初始化语句与判断语句。<br>在一行中有多条语句时，需要增加分号。</p>
</li>
<li><p>控制语句(if，for，switch，select)、函数、方法 的左大括号不能单独放在一行， 语法解析器会在大括号之前自动插入一个分号，导致编译错误。 </p>
</li>
</ul>
<h3 id="条件语句-if"><a href="#条件语句-if" class="headerlink" title="条件语句 if"></a><span id="条件语句-if"><strong>条件语句 if</strong></span></h3><ul>
<li><p><code>if</code>语句 小括号 ( )是可选的，而大括号 { } 是必须的。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (i &lt; <span class="number">0</span>)        <span class="comment">// 编译错误.</span></span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> i &lt; <span class="number">0</span>          <span class="comment">// 编译错误.</span></span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (i &lt; <span class="number">0</span>) &#123;      <span class="comment">// 编译通过.</span></span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> i &lt; <span class="number">0</span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> i &gt; <span class="number">5</span> &amp;&amp; i &lt;= <span class="number">10</span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>可以在条件之前执行一个简单的语句，由这个语句定义的变量的作用域仅在 if / else if / else 范围之内</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (i := <span class="number">0</span>; i &lt; <span class="number">1</span>) &#123;    <span class="comment">// 编译错误.</span></span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> i := <span class="number">0</span>; (i &lt; <span class="number">1</span>) &#123;    <span class="comment">// 编译通过.</span></span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> i := <span class="number">0</span>; i &lt; <span class="number">0</span> &#123;      <span class="comment">// 使用gofmt格式化代码会自动移除代码中不必要的小括号( )</span></span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> i == <span class="number">0</span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>if</code>语句作用域范围内定义的变量会覆盖外部同名变量，与方法函数内局部变量覆盖全局变量同理</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a, b := <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> a, b := <span class="number">3</span>, <span class="number">4</span>; a &gt; <span class="number">1</span> &amp;&amp; b &gt; <span class="number">2</span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(a, b)    <span class="comment">// 3 4</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println</span>(a, b)        <span class="comment">// 0 1</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>if</code>判断语句类型断言</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f0</span><span class="params">()</span> <span class="title">int</span></span> &#123;<span class="keyword">return</span> <span class="number">333</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    x := <span class="number">9</span></span><br><span class="line">    checkType(x)</span><br><span class="line">    checkType(f0)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkType</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">    <span class="comment">// 断言传入的x为int类型，并获取值</span></span><br><span class="line">    <span class="keyword">if</span> i, ok := x.(<span class="keyword">int</span>); ok &#123;</span><br><span class="line">        <span class="built_in">println</span>(<span class="string">&quot;int: &quot;</span>, i)    <span class="comment">// int:  0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> f, ok := x.(<span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span>); <span class="title">ok</span></span> &#123;</span><br><span class="line">        <span class="built_in">println</span>(<span class="string">&quot;func: &quot;</span>, f())    <span class="comment">// func:  333</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果传入x类型为int，则可以直接获取其值</span></span><br><span class="line">    a := x.(<span class="keyword">int</span>)</span><br><span class="line">    <span class="built_in">println</span>(a)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果传入x类型不是byte，则会产生恐慌panic</span></span><br><span class="line">    b := x.(<span class="keyword">byte</span>)</span><br><span class="line">    <span class="built_in">println</span>(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="分支选择-switch"><a href="#分支选择-switch" class="headerlink" title="分支选择 switch"></a><span id="分支选择-switch"><strong>分支选择 switch</strong></span></h3></li>
<li><p><code>switch</code>存在分支选择对象时，<code>case</code>分支支持单个常量、常量列表</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> x &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;single const&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;const list&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;default&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>分支选择对象之前可以有一个简单语句，case语句的大括号可以省略</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> x *= <span class="number">2</span>; x &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>: &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;single const&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>: &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;const list&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">default</span>: &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;default&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>switch</code>只有一个简单语句，没有分支选择对象时，case分支支持逻辑表达式语句</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> x /= <span class="number">3</span>; &#123;</span><br><span class="line"><span class="keyword">case</span> x == <span class="number">8</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;expression&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> x &gt;= <span class="number">9</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;expression&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;default&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>switch</code>没有简单语句，没有分支选择对象时，case分支支持逻辑表达式语句</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line"><span class="keyword">case</span> x == <span class="number">10</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;expression&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> x &gt;= <span class="number">11</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;expression&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;default&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>switch</code>类型分支，只能在switch语句中使用的<code>.(type)</code>获取对象的类型。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;code.google.com/p/go.crypto/openpgp/errors&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        a = <span class="number">0.1</span></span><br><span class="line">        b = <span class="number">2</span>+<span class="number">3i</span></span><br><span class="line">        c = <span class="string">&quot;asdf&quot;</span></span><br><span class="line">        d = [...]<span class="keyword">byte</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">        e = []<span class="keyword">complex128</span>&#123;<span class="number">1</span>+<span class="number">2i</span>&#125;</span><br><span class="line">        f = <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">uintptr</span>&#123;<span class="string">&quot;a&quot;</span>: <span class="number">0</span>&#125;</span><br><span class="line">        g = <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;<span class="keyword">return</span> <span class="literal">true</span>&#125;</span><br><span class="line">        h = <span class="keyword">struct</span> &#123; a, b <span class="keyword">int</span> &#125;&#123;&#125;</span><br><span class="line">        i = &amp;<span class="keyword">struct</span> &#123;&#125;&#123;&#125;</span><br><span class="line">        j <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line">        k <span class="keyword">chan</span> &lt;- <span class="keyword">bool</span></span><br><span class="line">        l &lt;-<span class="keyword">chan</span> <span class="keyword">string</span></span><br><span class="line">        m errors.SignatureError</span><br><span class="line">    )</span><br><span class="line">    values := []<span class="keyword">interface</span>&#123;&#125;&#123;<span class="literal">nil</span>, a, b, &amp;c, d, e, f, g, &amp;g, h, &amp;h, i, j, k, l, m&#125;</span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> values &#123;</span><br><span class="line">        typeswitch(v)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">typeswitch</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">    <span class="comment">// switch x.(type) &#123;    // 不使用类型值时</span></span><br><span class="line">    <span class="keyword">switch</span> i := x.(<span class="keyword">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">        fmt.Println(<span class="string">&quot;x is nil&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">int</span>, <span class="keyword">int8</span>, <span class="keyword">int16</span>, <span class="keyword">rune</span>, <span class="keyword">int64</span>, <span class="keyword">uint</span>, <span class="keyword">byte</span>, <span class="keyword">uint16</span>, <span class="keyword">uint32</span>, <span class="keyword">uint64</span>, <span class="keyword">float32</span>, <span class="keyword">float64</span>, <span class="keyword">complex64</span>, <span class="keyword">complex128</span>, <span class="keyword">uintptr</span>, <span class="keyword">bool</span>, <span class="keyword">string</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;basic type : %T\n&quot;</span>, i)</span><br><span class="line">    <span class="keyword">case</span> *<span class="keyword">int</span>, *<span class="keyword">int8</span>, *<span class="keyword">int16</span>, *<span class="keyword">rune</span>, *<span class="keyword">int64</span>, *<span class="keyword">uint</span>, *<span class="keyword">byte</span>, *<span class="keyword">uint16</span>, *<span class="keyword">uint32</span>, *<span class="keyword">uint64</span>, *<span class="keyword">float32</span>, *<span class="keyword">float64</span>, *<span class="keyword">complex64</span>, *<span class="keyword">complex128</span>, *<span class="keyword">uintptr</span>, *<span class="keyword">bool</span>, *<span class="keyword">string</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;basic pointer type : %T\n&quot;</span>, i)</span><br><span class="line">    <span class="keyword">case</span> [<span class="number">3</span>]<span class="keyword">byte</span>, []<span class="keyword">complex128</span>, <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">uintptr</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;collection type : %T\n&quot;</span>, i)</span><br><span class="line">    <span class="keyword">case</span> <span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="params">(b <span class="keyword">bool</span>)</span>, *<span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;function type : %T\n&quot;</span>, i)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">struct</span> &#123;a, b <span class="keyword">int</span>&#125;, *<span class="keyword">struct</span> &#123;&#125;:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;struct type : %T\n&quot;</span>, i)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">chan</span> <span class="keyword">int</span>, <span class="keyword">chan</span> &lt;- <span class="keyword">bool</span>, &lt;-<span class="keyword">chan</span> <span class="keyword">string</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;channel type : %T\n&quot;</span>, i)</span><br><span class="line">    <span class="keyword">case</span> error, <span class="keyword">interface</span>&#123;a(); b()&#125;:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;interface type : %T\n&quot;</span>, i)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        fmt.Printf(<span class="string">&quot;other type : %T\n&quot;</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// output: </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// x is nil</span></span><br><span class="line"><span class="comment">// basic type : float64</span></span><br><span class="line"><span class="comment">// basic type : complex128</span></span><br><span class="line"><span class="comment">// basic pointer type : *string</span></span><br><span class="line"><span class="comment">// collection type : [3]uint8</span></span><br><span class="line"><span class="comment">// collection type : []complex128</span></span><br><span class="line"><span class="comment">// collection type : map[string]uintptr</span></span><br><span class="line"><span class="comment">// function type : func(int) bool</span></span><br><span class="line"><span class="comment">// other type : *func(int) bool</span></span><br><span class="line"><span class="comment">// struct type : struct &#123; a int; b int &#125;</span></span><br><span class="line"><span class="comment">// other type : *struct &#123; a int; b int &#125;</span></span><br><span class="line"><span class="comment">// struct type : *struct &#123;&#125;</span></span><br><span class="line"><span class="comment">// channel type : chan int</span></span><br><span class="line"><span class="comment">// channel type : chan&lt;- bool</span></span><br><span class="line"><span class="comment">// channel type : &lt;-chan string</span></span><br><span class="line"><span class="comment">// interface type : errors.SignatureError</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>switch</code>中每个case分支默认带有break效果，一个分支执行后就跳出switch，不会自动向下执行其他case。<br>使用<code>fallthrough</code>强制向下继续执行后面的case代码。<br>在类型分支中不允许使用<code>fallthrough</code>语句</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="literal">false</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;case 1&quot;</span>)</span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">case</span> <span class="literal">true</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;case 2&quot;</span>)</span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">case</span> <span class="literal">false</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;case 3&quot;</span>)</span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">case</span> <span class="literal">true</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;case 4&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="literal">false</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;case 5&quot;</span>)</span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;default case&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出：case 2 case 3 case 4</span></span><br></pre></td></tr></table></figure>
<h3 id="循环语句-for"><a href="#循环语句-for" class="headerlink" title="循环语句 for"></a><span id="循环语句-for"><strong>循环语句 for</strong></span></h3></li>
<li><p>Go只有一种循环结构：<code>for</code> 循环。<br>可以让前置(初始化)、中间(条件)、后置(迭代)语句为空，或者全为空。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;...&#125;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; &#123;...&#125;      <span class="comment">// 省略迭代语句</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; ; i++; &#123;...&#125;       <span class="comment">// 省略条件语句</span></span><br><span class="line"><span class="keyword">for</span> ; i &lt; <span class="number">10</span>; i++ &#123;...&#125;        <span class="comment">// 省略初始化语句</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; ; &#123;...&#125;            <span class="comment">// 省略条件和迭代语句, 分号不能省略</span></span><br><span class="line"><span class="keyword">for</span> ; i &lt; <span class="number">10</span>; &#123;...&#125;            <span class="comment">// 省略初始化和迭代语句, 分号可省略</span></span><br><span class="line"><span class="keyword">for</span> ; ; i++ &#123;...&#125;              <span class="comment">// 省略初始化和条件语句, 分号不能省略</span></span><br><span class="line"><span class="keyword">for</span> i &lt; <span class="number">10</span> &#123;...&#125;</span><br><span class="line"><span class="keyword">for</span> ; ; &#123;...&#125;                  <span class="comment">// 分号可省略</span></span><br><span class="line"><span class="keyword">for</span> &#123;...&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>for</code>语句中小括号 ( )是可选的，而大括号 { } 是必须的。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;...&#125;     <span class="comment">// 编译错误.</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; (i &lt; <span class="number">10</span>); i++ &#123;...&#125;     <span class="comment">// 编译通过.</span></span><br><span class="line"><span class="keyword">for</span> (i &lt; <span class="number">10</span>) &#123;...&#125;                  <span class="comment">// 编译通过.</span></span><br></pre></td></tr></table></figure></li>
<li><p>Go的for each循环<code>for range</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> a &#123;</span><br><span class="line">    fmt.Println(k, v)    <span class="comment">// 输出：0 2, 1 3, 2 4, 3 5, 4 6</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k := <span class="keyword">range</span> a &#123;</span><br><span class="line">    fmt.Println(k)    <span class="comment">// 输出：0 1 2 3 4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ = <span class="keyword">range</span> a &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;print without care about the key and value&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  <code>Go1.4+</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">range</span> a &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;new syntax – print without care about the key and value&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>循环的继续、中断、跳转</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> s &#123;</span><br><span class="line">    <span class="keyword">if</span> v == <span class="number">3</span> &#123;</span><br><span class="line">        <span class="keyword">continue</span>    <span class="comment">// 结束本次循环，进入下一次循环中</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> v == <span class="number">5</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>    <span class="comment">// 结束整个for循环</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">goto</span> SOMEWHERE    <span class="comment">// 跳转到标签指定的代码处</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>for range</code>只支持遍历<code>数组</code>、<code>数组指针</code>、<code>slice</code>、<code>string</code>、<code>map</code>、<code>channel</code>类型</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> arr = [...]<span class="keyword">int</span>&#123;<span class="number">33</span>, <span class="number">22</span>, <span class="number">11</span>, <span class="number">0</span>&#125;</span><br><span class="line">    <span class="comment">// 遍历数组，取一位值时为索引值</span></span><br><span class="line">    <span class="keyword">for</span> k := <span class="keyword">range</span> arr &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d, &quot;</span>, k)   <span class="comment">// 0, 1, 2, 3,</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line">    <span class="comment">// 遍历数组，取两位值时，第一位为索引值，第二位为元素值</span></span><br><span class="line">    <span class="keyword">for</span> k, v := <span class="keyword">range</span> arr &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d %d, &quot;</span>, k, v) <span class="comment">// 0 33, 1 22, 2 11, 3 0,</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遍历数组指针，取一位值时为索引值</span></span><br><span class="line">    <span class="keyword">for</span> k := <span class="keyword">range</span> &amp;arr &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d, &quot;</span>, k)   <span class="comment">// 0, 1, 2, 3,</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line">    <span class="comment">// 遍历数组指针，取两位值时，第一位为索引值，第二位为元素值</span></span><br><span class="line">    <span class="keyword">for</span> k, v := <span class="keyword">range</span> &amp;arr &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d %d, &quot;</span>, k, v) <span class="comment">// 0 33, 1 22, 2 11, 3 0,</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> slc = []<span class="keyword">byte</span>&#123;<span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>, <span class="number">77</span>&#125;</span><br><span class="line">    <span class="comment">// 遍历切片，取一位值时为索引值</span></span><br><span class="line">    <span class="keyword">for</span> k := <span class="keyword">range</span> slc &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d, &quot;</span>, k)   <span class="comment">// 0, 1, 2, 3,</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line">    <span class="comment">// 遍历切片，取两位值时，第一位为索引值，第二位为元素值</span></span><br><span class="line">    <span class="keyword">for</span> k, v := <span class="keyword">range</span> slc &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d %d, &quot;</span>, k, v) <span class="comment">// 0 44, 1 55, 2 66, 3 77,</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">&quot;abc一二3&quot;</span></span><br><span class="line">    <span class="comment">// 遍历字符串，取一位值时为字节索引值</span></span><br><span class="line">    <span class="keyword">for</span> k := <span class="keyword">range</span> str &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d, &quot;</span>, k)   <span class="comment">// 0, 1, 2, 3, 6, 9,</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line">    <span class="comment">// 遍历字符串，取两位值时，第一位为字节索引值，第二位为Unicode字符</span></span><br><span class="line">    <span class="keyword">for</span> k, v := <span class="keyword">range</span> str &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d %d %s, &quot;</span>, k, v, <span class="keyword">string</span>(v))   <span class="comment">// 0 97 a, 1 98 b, 2 99 c, 3 19968 一, 6 20108 二, 9 51 3,</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> mp = <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span>&#123;<span class="number">5</span>:<span class="string">&quot;A&quot;</span>, <span class="number">9</span>:<span class="string">&quot;B&quot;</span>&#125;</span><br><span class="line">    <span class="comment">// 遍历map，取一位值时为键key</span></span><br><span class="line">    <span class="keyword">for</span> k := <span class="keyword">range</span> mp &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d, &quot;</span>, k)   <span class="comment">// 9, 5,</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line">    <span class="comment">// 遍历map，取两位值时，第一位为键key，第二位为元素值value</span></span><br><span class="line">    <span class="keyword">for</span> k, v := <span class="keyword">range</span> mp &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d %s, &quot;</span>, k, v) <span class="comment">// 5 A, 9 B,</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">            ch &lt;- i</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">close</span>(ch)</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="comment">// 遍历channel时，只能取一位值，为发送方发送到channel中的值</span></span><br><span class="line">    <span class="keyword">for</span> x := <span class="keyword">range</span> ch &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d &quot;</span>, x)    <span class="comment">// 0 1 2 3 4</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="通道选择-select"><a href="#通道选择-select" class="headerlink" title="通道选择 select"></a><span id="通道选择-select"><strong>通道选择 select</strong></span></h3></li>
<li><p><code> select</code>用于当前goroutine从一组可能的通讯中选择一个进一步处理。<br>如果任意一个通讯都可以进一步处理，则从中随机选择一个，执行对应的语句。否则在没有默认分支(default case)时，select语句则会阻塞，直到其中一个通讯完成。<br>select 的 case 里的操作语句只能是IO操作</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ch1, ch2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>), <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 因为没有值发送到select中的任一case的channel中，此select将会阻塞</span></span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> &lt;-ch1:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;channel 1&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> &lt;-ch2:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;channel 2&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ch1, ch2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>), <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 因为没有值发送到select中的任一case的channel中，此select将会执行default分支</span></span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> &lt;-ch1:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;channel 1&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> &lt;-ch2:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;channel 2&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;default&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>select只会执行一次case分支的逻辑，与<code>for</code>组合使用实现多次遍历分支</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        <span class="keyword">select</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> &lt;-time.Tick(time.Second):</span><br><span class="line">            <span class="built_in">println</span>(<span class="string">&quot;Tick&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> &lt;-time.After(<span class="number">5</span> * time.Second):</span><br><span class="line">            <span class="built_in">println</span>(<span class="string">&quot;Finish&quot;</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="built_in">println</span>(<span class="string">&quot;default&quot;</span>)</span><br><span class="line">            time.Sleep(<span class="number">5e8</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="延迟执行-defer"><a href="#延迟执行-defer" class="headerlink" title="延迟执行 defer"></a><span id="延迟执行-defer"><strong>延迟执行 defer</strong></span></h3></li>
<li><p><code>defer</code>语句调用函数，将调用的函数加入defer栈，栈中函数在defer所在的主函数返回时执行，执行顺序是先进后出/后进先出。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> <span class="built_in">print</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">defer</span> <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">defer</span> <span class="built_in">print</span>(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">defer</span> <span class="built_in">print</span>(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">defer</span> <span class="built_in">print</span>(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">5</span>; i &lt;= <span class="number">9</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">defer</span> <span class="built_in">print</span>(i)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 输出：9876543210</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>defer在函数返回后执行，可以修改函数返回值</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(f())    <span class="comment">// 返回： 15</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="params">(i <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        i *= <span class="number">5</span></span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>defer用于释放资源  </p>
<p>释放锁</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mu.Lock()</span><br><span class="line"><span class="keyword">defer</span> mu.Unlock()</span><br></pre></td></tr></table></figure>

<p>关闭channel</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ch &lt;- <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">defer</span> <span class="built_in">close</span>(ch)</span><br></pre></td></tr></table></figure>

<p>关闭IO流</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f, err := os.Open(<span class="string">&quot;file.xxx&quot;</span>)</span><br><span class="line"><span class="keyword">defer</span> f.Close()</span><br></pre></td></tr></table></figure>

<p>关闭数据库连接</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db, err := sql.Open(<span class="string">&quot;mysql&quot;</span>,<span class="string">&quot;user:password@tcp(127.0.0.1:3306)/hello&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> db.Close()</span><br></pre></td></tr></table></figure></li>
<li><p>defer用于恐慌的截获<br><code>panic</code>用于产生恐慌，<code>recover</code>用于截获恐慌，recover只能在defer语句中使用, 直接调用recover是无效的。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    f()</span><br><span class="line">    fmt.Println(<span class="string">&quot;main normal...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> r := <span class="built_in">recover</span>(); r != <span class="literal">nil</span> &#123;</span><br><span class="line">            fmt.Println(<span class="string">&quot;catch:&quot;</span>, r)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;()</span><br><span class="line">    p()</span><br><span class="line">    fmt.Println(<span class="string">&quot;normal...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">p</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(<span class="string">&quot;exception...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="跳转语句-goto"><a href="#跳转语句-goto" class="headerlink" title="跳转语句 goto"></a><span id="跳转语句-goto"><strong>跳转语句 goto</strong></span></h3></li>
<li><p><code>goto</code>用于在一个函数内部运行跳转到指定标签的代码处，不能跳转到其他函数中定义的标签。</p>
</li>
<li><p><code>goto</code>模拟循环</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    i := <span class="number">0</span></span><br><span class="line">loop:</span><br><span class="line">    i++</span><br><span class="line">    <span class="keyword">if</span> i &lt; <span class="number">5</span> &#123;</span><br><span class="line">        <span class="keyword">goto</span> loop</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>goto</code>模拟<code>continue</code>，<code>break</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    i, sum := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">head:</span><br><span class="line">    <span class="keyword">for</span> ; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i &lt; <span class="number">5</span> &#123;</span><br><span class="line">            i++    <span class="comment">// 此处必须单独调用一次，因为goto跳转时不会执行for循环的自增语句</span></span><br><span class="line">            <span class="keyword">goto</span> head    <span class="comment">// continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">9</span> &#123;</span><br><span class="line">            <span class="keyword">goto</span> tail    <span class="comment">// break</span></span><br><span class="line">        &#125;</span><br><span class="line">        sum += i</span><br><span class="line">    &#125;</span><br><span class="line">tail:</span><br><span class="line">    <span class="built_in">println</span>(sum)    <span class="comment">// 输出：35</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>注意</strong>：任何时候都不建议使用<code>goto</code>  </p>
</li>
</ul>
<h3 id="阻塞语句"><a href="#阻塞语句" class="headerlink" title="阻塞语句"></a><span id="阻塞语句-blocking">阻塞语句</span></h3><ul>
<li><p>永久阻塞语句</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向一个未初始化的channel中写入数据会永久阻塞</span></span><br><span class="line">(<span class="keyword">chan</span> <span class="keyword">int</span>)(<span class="literal">nil</span>) &lt;- <span class="number">0</span></span><br><span class="line"><span class="comment">// 从一个未初始化的channel中读取数据会永久阻塞</span></span><br><span class="line">&lt;-(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)(<span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">range</span> (<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)(<span class="literal">nil</span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// select无任何选择分支会永久阻塞</span></span><br><span class="line"><span class="keyword">select</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="函数-Function"><a href="#函数-Function" class="headerlink" title="函数 Function"></a><span id="函数-function"><strong>函数 Function</strong></span></h2></li>
</ul>
<h3 id="函数声明-Declare"><a href="#函数声明-Declare" class="headerlink" title="函数声明 Declare"></a><span id="函数声明-declare"><strong>函数声明 Declare</strong></span></h3><ul>
<li><p>使用关键字<code>func</code>声明函数，函数可以没有参数或接受多个参数</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f0</span><span class="params">()</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">(a <span class="keyword">int</span>)</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">(a <span class="keyword">int</span>, b <span class="keyword">byte</span>)</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>在函数参数类型之前使用<code>...</code>声明该参数为可变数量的参数<br>可变参数只能声明为函数的最后一个参数。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f3</span><span class="params">(a ...<span class="keyword">int</span>)</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f4</span><span class="params">(a <span class="keyword">int</span>, b <span class="keyword">bool</span>, c ...<span class="keyword">string</span>)</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>函数可以返回任意数量的返回值</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f0</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>, <span class="string">&quot;A&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>函数返回结果参数，可以像变量那样命名和使用</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="params">(a <span class="keyword">int</span>, b <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    b = <span class="string">&quot;B&quot;</span></span><br><span class="line">    <span class="keyword">return</span>    <span class="comment">// 即使return后面没有跟变量，关键字在函数结尾也是必须的</span></span><br><span class="line">    <span class="comment">// 或者 return a, b</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>当两个或多个连续的函数命名参数是同一类型，则除了最后一个类型之外，其他都可以省略</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f0</span><span class="params">(a,b,c <span class="keyword">int</span>)</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span> <span class="params">(a,b,c <span class="keyword">int</span>)</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">(a,b <span class="keyword">int</span>, c,d <span class="keyword">byte</span>)</span> <span class="params">(x,y <span class="keyword">int</span>, z,s <span class="keyword">bool</span>)</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数闭包-Closure"><a href="#函数闭包-Closure" class="headerlink" title="函数闭包 Closure"></a><span id="函数闭包-closure"><strong>函数闭包 Closure</strong></span></h3></li>
<li><p>匿名函数、闭包、函数值<br>Go中函数作为第一类对象，可以作为值对象赋值给变量<br>可以在函数体外/内定义匿名函数，命名函数不能嵌套定义到函数体内，只能定义在函数体外</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Myfunc <span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f0</span><span class="params">(name <span class="keyword">string</span>)</span></span>&#123;</span><br><span class="line">    <span class="built_in">println</span>(name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a = f0</span><br><span class="line">    a(<span class="string">&quot;hello&quot;</span>)    <span class="comment">// hello</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> f1 Myfunc = <span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(f1(<span class="number">3</span>))    <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> f2 <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span> = <span class="title">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(f2())     <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 省略部分关键字</span></span><br><span class="line">    <span class="keyword">var</span> f3 <span class="function"><span class="keyword">func</span><span class="params">()</span> = <span class="title">func</span><span class="params">()</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br><span class="line">    <span class="keyword">var</span> f4 = <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br><span class="line">    f5 := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;<span class="comment">/*...*/</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="内建函数-Builtin"><a href="#内建函数-Builtin" class="headerlink" title="内建函数 Builtin"></a><span id="内建函数-builtin"><strong>内建函数 Builtin</strong></span></h3></li>
<li><p><code>func append</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(slice []Type, elems ...Type)</span> []<span class="title">Type</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数append将元素追加到切片的末尾。若它有足够的容量，其目标就会重新切片以容纳新的元素。否则，就会分配一个新的基本数组。append返回更新后的切片，因此必须存储追加后的结果。</p>
</blockquote>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">slice = <span class="built_in">append</span>(slice, elem1, elem2)</span><br><span class="line">slice = <span class="built_in">append</span>(slice, anotherSlice...)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>作为特例，可以向一个字节切片append字符串，如下：</p>
</blockquote>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slice = <span class="built_in">append</span>([]<span class="keyword">byte</span>(<span class="string">&quot;hello &quot;</span>), <span class="string">&quot;world&quot;</span>...)</span><br></pre></td></tr></table></figure>
<p>  　  </p>
</li>
<li><p><code>func cap</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cap</span><span class="params">(v Type)</span> <span class="title">int</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数cap返回 v 的容量，这取决于具体类型：<br>  数组：v中元素的数量，与 len(v) 相同<br>  数组指针：*v中元素的数量，与len(v) 相同<br>  切片：切片的容量（底层数组的长度）；若 v为nil，cap(v) 即为零<br>  信道：按照元素的单元，相应信道缓存的容量；若v为nil，cap(v)即为零</p>
</blockquote>
<p>  　  </p>
</li>
<li><p><code>func close</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">close</span><span class="params">(c <span class="keyword">chan</span>&lt;- Type)</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数close关闭信道，该通道必须为双向的或只发送的。它应当只由发送者执行，而不应由接收者执行，其效果是在最后发送的值被接收后停止该通道。在最后的值从已关闭的信道中被接收后，任何对其的接收操作都会无阻塞的成功。对于已关闭的信道，语句：</p>
</blockquote>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x, ok := &lt;-c    <span class="comment">// ok值为false</span></span><br></pre></td></tr></table></figure>
<p>  　  </p>
</li>
<li><p><code>func complex</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">complex</span><span class="params">(r, i FloatType)</span> <span class="title">ComplexType</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用实部r和虚部i生成一个复数。</p>
</blockquote>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c := <span class="built_in">complex</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fmt.Println(c)    <span class="comment">// (1+2i)</span></span><br></pre></td></tr></table></figure>
<p>  　  </p>
</li>
<li><p><code>func copy</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(dst, src []Type)</span> <span class="title">int</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数copy将元素从来源切片复制到目标切片中，也能将字节从字符串复制到字节切片中。copy返回被复制的元素数量，它会是 len(src) 和 len(dst) 中较小的那个。来源和目标的底层内存可以重叠。</p>
</blockquote>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a, b, c := []<span class="keyword">byte</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">2</span>), <span class="number">0</span></span><br><span class="line">fmt.Println(<span class="string">&quot;a:&quot;</span>, a, <span class="string">&quot; b:&quot;</span>, b, <span class="string">&quot; c: &quot;</span>, c)    <span class="comment">// a: [1 2 3]  b: [0 0]  c:  0</span></span><br><span class="line"></span><br><span class="line">c = <span class="built_in">copy</span>(b, a)</span><br><span class="line">fmt.Println(<span class="string">&quot;a:&quot;</span>, a, <span class="string">&quot; b:&quot;</span>, b, <span class="string">&quot; c: &quot;</span>, c)    <span class="comment">// a: [1 2 3]  b: [1 2]  c:  2</span></span><br><span class="line"></span><br><span class="line">b = <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">5</span>)</span><br><span class="line">c = <span class="built_in">copy</span>(b, a)</span><br><span class="line">fmt.Println(<span class="string">&quot;a:&quot;</span>, a, <span class="string">&quot; b:&quot;</span>, b, <span class="string">&quot; c: &quot;</span>, c)    <span class="comment">// a: [1 2 3]  b: [1 2 3 0 0]  c:  3</span></span><br><span class="line"></span><br><span class="line">s := <span class="string">&quot;ABCD&quot;</span></span><br><span class="line">c = <span class="built_in">copy</span>(b, s)</span><br><span class="line">fmt.Println(<span class="string">&quot;s:&quot;</span>, s, <span class="string">&quot; b:&quot;</span>, b, <span class="string">&quot; c: &quot;</span>, c)    <span class="comment">// s: ABCD  b: [65 66 67 68 0]  c:  4</span></span><br></pre></td></tr></table></figure>
<p>  　  </p>
</li>
<li><p><code>func delete</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">delete</span><span class="params">(m <span class="keyword">map</span>[Type]Type1, key Type)</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数delete按照指定的键将元素从映射中删除。若m为nil或无此元素，delete不进行操作。</p>
</blockquote>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">    <span class="number">0</span>: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">    <span class="number">2</span>: <span class="string">&quot;C&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">delete</span>(m, <span class="number">1</span>)</span><br><span class="line">fmt.Println(m)    <span class="comment">// map[2:C 0:A]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="number">3</span>)    <span class="comment">// 此行代码执行没有任何操作，也不会报错。</span></span><br></pre></td></tr></table></figure>
<p>  　  </p>
</li>
<li><p><code>func imag</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">imag</span><span class="params">(c ComplexType)</span> <span class="title">FloatType</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>返回复数c的虚部。</p>
</blockquote>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c := <span class="number">2</span>+<span class="number">5i</span></span><br><span class="line">fmt.Println(<span class="built_in">imag</span>(c))    <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<p>  　  </p>
</li>
<li><p><code>func len</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">len</span><span class="params">(v Type)</span> <span class="title">int</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数len返回 v 的长度，这取决于具体类型：<br>  数组：v中元素的数量<br>  数组指针：*v中元素的数量（v为nil时panic）<br>  切片、映射：v中元素的数量；若v为nil，len(v)即为零<br>  字符串：v中字节的数量，计算字符数量使用<code>utf8.RuneCountInString()</code><br>  通道：通道缓存中队列（未读取）元素的数量；若v为 nil，len(v)即为零</p>
</blockquote>
<p>  　  </p>
</li>
<li><p><code>func make</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">make</span><span class="params">(Type, size IntegerType)</span> <span class="title">Type</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数make分配并初始化一个类型为切片、映射、或通道的对象。其第一个实参为类型，而非值。make的返回类型与其参数相同，而非指向它的指针。其具体结果取决于具体的类型：<br>  切片：size指定了其长度。该切片的容量等于其长度。切片支持第二个整数实参可用来指定不同的容量；它必须不小于其长度，因此 make([]int, 0, 10) 会分配一个长度为0，容量为10的切片。<br>  映射：初始分配的创建取决于size，但产生的映射长度为0。size可以省略，这种情况下就会分配一个小的起始大小。<br>  通道：通道的缓存根据指定的缓存容量初始化。若 size为零或被省略，该信道即为无缓存的。</p>
</blockquote>
<p>  　  </p>
</li>
<li><p><code>func new</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">new</span><span class="params">(Type)</span> *<span class="title">Type</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数new分配内存。其第一个实参为类型，而非值。其返回值为指向该类型的新分配的零值的指针。</p>
</blockquote>
<p>  　  </p>
</li>
<li><p><code>func panic</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">panic</span><span class="params">(v <span class="keyword">interface</span>&#123;&#125;)</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数panic停止当前Go程的正常执行。当函数F调用panic时，F的正常执行就会立刻停止。F中defer的所有函数先入后出执行后，F返回给其调用者G。G如同F一样行动，层层返回，直到该Go程中所有函数都按相反的顺序停止执行。之后，程序被终止，而错误情况会被报告，包括引发该恐慌的实参值，此终止序列称为恐慌过程。</p>
</blockquote>
<p>  　  </p>
</li>
<li><p><code>func print</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">print</span><span class="params">(args ...Type)</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数print以特有的方法格式化参数并将结果写入标准错误，用于自举和调试。</p>
</blockquote>
<p>  　  </p>
</li>
<li><p><code>func println</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">println</span><span class="params">(args ...Type)</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>println类似print，但会在参数输出之间添加空格，输出结束后换行。</p>
</blockquote>
<p>  　  </p>
</li>
<li><p><code>func real</code></p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">real</span><span class="params">(c ComplexType)</span> <span class="title">FloatType</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>返回复数c的实部。</p>
</blockquote>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    c := <span class="number">2</span>+<span class="number">5i</span></span><br><span class="line">    fmt.Println(<span class="built_in">real</span>(c))    <span class="comment">// 2</span></span><br><span class="line">    <span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">    　  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- `</span><span class="function"><span class="keyword">func</span> <span class="title">recover</span>`</span></span><br><span class="line"></span><br><span class="line">    <span class="string">``</span><span class="string">`go</span></span><br><span class="line"><span class="string">    func recover() interface&#123;&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>内建函数recover允许程序管理恐慌过程中的Go程。在defer的函数中，执行recover调用会取回传至panic调用的错误值，恢复正常执行，停止恐慌过程。若recover在defer的函数之外被调用，它将不会停止恐慌过程序列。在此情况下，或当该Go程不在恐慌过程中时，或提供给panic的实参为nil时，recover就会返回nil。</p>
</blockquote>
</li>
</ul>
<h3 id="初始化函数-init"><a href="#初始化函数-init" class="headerlink" title="初始化函数 init"></a><span id="初始化函数-init"><strong>初始化函数 init</strong></span></h3><ul>
<li><p><code>init</code>函数是用于程序执行前做包的初始化工作的函数<br><code>init</code>函数的声明没有参数和返回值</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>一个package或go源文件可以包含零个或多个init函数</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;init1...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;init2...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;init3...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>init函数被自动调用，在main函数之前执行，不能在其他函数中调用，显式调用会报错该函数未定义。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;init...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    init()    <span class="comment">// undefined: init</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>所有<code>init</code>函数都会被自动调用，调用顺序如下：</p>
<ol>
<li>同一个go文件的init函数调用顺序是 <strong>从上到下</strong>的</li>
<li>同一个package中按go源文件名字符串比较 <strong>从小到大</strong>顺序调用各文件中的init函数</li>
<li>不同的package，如果不相互依赖的，按照main包中 <strong>先import的后调用</strong>的顺序调用其包中的init函数</li>
<li>如果package存在依赖，则先调用最早被依赖的package中的init函数</li>
</ol>
</li>
</ul>
<h3 id="方法-Method"><a href="#方法-Method" class="headerlink" title="方法 Method"></a><span id="方法-method"><strong>方法 Method</strong></span></h3><ul>
<li><p>通过指定函数的接收者receiver,将函数绑定到一个类型或类型的指针上,使这个函数成为该类型的方法。<br>只能对命名类型和命名类型的指针编写方法。<br>只能在定义命名类型的那个包编写其方法。<br>不能对接口类型和接口类型的指针编写方法。<br>方法的接收者receiver是类型的值时，编译器会隐式的生成一个同名方法，其接收者receiver为该类型的指针，反过来却不会。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">    x, y <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义结构体的方法，&#x27;_&#x27;表示方法内忽略使用结构体、字段及其他方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(_ A)</span> <span class="title">echo_A</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;(_ A)&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同上</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(A)</span> <span class="title">echoA</span><span class="params">(s <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;(A)&quot;</span>, s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义结构体指针的方法，&#x27;_&#x27;表示方法内忽略使用结构体指针、字段及其他方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(_ *A)</span> <span class="title">echo_</span>ж<span class="title">A</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;(_ *A)&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同上</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(*A)</span> <span class="title">echo</span>ж<span class="title">A</span><span class="params">(s <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;(*A)&quot;</span>, s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义结构体的方法，方法内可以引用结构体、字段及其他方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a A)</span> <span class="title">setX</span><span class="params">(x <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    a.x = x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义结构体指针的方法，方法内可以引用结构体、结构体指针、字段及其他方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *A)</span> <span class="title">setY</span><span class="params">(y <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    a.y = y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a A    <span class="comment">// a = A&#123;&#125;</span></span><br><span class="line">    a.setX(<span class="number">3</span>)</span><br><span class="line">    a.setY(<span class="number">6</span>)</span><br><span class="line">    <span class="built_in">println</span>(a.x, a.y) <span class="comment">// 0  6</span></span><br><span class="line">    a.echo_A()    <span class="comment">// (_ A)</span></span><br><span class="line">    a.echoA(<span class="string">&quot;a&quot;</span>)    <span class="comment">// (A) a</span></span><br><span class="line">    a.echo_жA()    <span class="comment">// (_ *A)</span></span><br><span class="line">    a.echoжA(<span class="string">&quot;a&quot;</span>)    <span class="comment">// (*A) a</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以下是定义在结构体值上的方法原型，通过调用结构体类型上定义的函数，传入结构体的值</span></span><br><span class="line">    A.echo_A(a)    <span class="comment">// (_ A)</span></span><br><span class="line">    A.echoA(a, <span class="string">&quot;a&quot;</span>)    <span class="comment">// (A) a</span></span><br><span class="line">    <span class="comment">// A.echo_жA(a)    // A.echo_жA未定义</span></span><br><span class="line">    <span class="comment">// A.echoжA(a)    //  A.echoжA未定义</span></span><br><span class="line">    A.setX(a, <span class="number">4</span>)</span><br><span class="line">    <span class="comment">// A.setY(a, 7)    // A.setY未定义</span></span><br><span class="line">    <span class="built_in">println</span>(a.x) <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    b := &amp;a</span><br><span class="line">    b.setX(<span class="number">2</span>)</span><br><span class="line">    b.setY(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">println</span>(b.x, b.y) <span class="comment">// 0  5</span></span><br><span class="line">    b.echo_A()    <span class="comment">// (_ A)</span></span><br><span class="line">    b.echoA(<span class="string">&quot;b&quot;</span>)    <span class="comment">// (A) b</span></span><br><span class="line">    b.echo_жA()    <span class="comment">// (_ *A)</span></span><br><span class="line">    b.echoжA(<span class="string">&quot;b&quot;</span>)    <span class="comment">// (*A) b</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以下是定义在结构体指针上的方法原型，通过调用结构体类型指针上定义的函数，传入结构体的指针</span></span><br><span class="line">    (*A).echo_A(b)    <span class="comment">// (_ A)</span></span><br><span class="line">    (*A).echoA(b, <span class="string">&quot;b&quot;</span>)    <span class="comment">// (A) b</span></span><br><span class="line">    (*A).echo_жA(b)    <span class="comment">// (_ *A)</span></span><br><span class="line">    (*A).echoжA(b, <span class="string">&quot;b&quot;</span>)    <span class="comment">// (*A) b</span></span><br><span class="line">    (*A).setX(b, <span class="number">1</span>)</span><br><span class="line">    (*A).setY(b, <span class="number">8</span>)</span><br><span class="line">    <span class="built_in">println</span>(b.x, b.y)    <span class="comment">// 0   8</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用结构体空指针上的方法，以下注释掉的代码都是空指针错误</span></span><br><span class="line">    <span class="keyword">var</span> c *A    <span class="comment">// c = nil</span></span><br><span class="line">    <span class="comment">// c.setX(2)</span></span><br><span class="line">    <span class="comment">// c.setY(5)</span></span><br><span class="line">    <span class="comment">// println(c.x, c.y)</span></span><br><span class="line">    <span class="comment">// c.echo_A()</span></span><br><span class="line">    <span class="comment">// c.echoA()</span></span><br><span class="line">    c.echo_жA()    <span class="comment">// (_ *A)</span></span><br><span class="line">    c.echoжA(<span class="string">&quot;c&quot;</span>)    <span class="comment">// (*A) c</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// (*A).echo_A(c)</span></span><br><span class="line">    <span class="comment">// (*A).echoA(c)</span></span><br><span class="line">    (*A).echo_жA(c)    <span class="comment">// (_ *A)</span></span><br><span class="line">    (*A).echoжA(c, <span class="string">&quot;c&quot;</span>)    <span class="comment">// (*A) c</span></span><br><span class="line">    <span class="comment">// (*A).setX(c, 1)</span></span><br><span class="line">    <span class="comment">// (*A).setY(c, 8)</span></span><br><span class="line">    <span class="comment">// println(c.x, c.y)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>结构体中组合匿名字段时，匿名字段的方法会向外传递，其规则如下：<br>匿名字段为值类型时：值的方法会传递给结构体的值，指针的方法会传递给结构体的指针；<br>匿名字段为指针类型时：指针的方法会传递给值和指针；<br>匿名字段为接口类型时：方法会传递给值和指针； </p>
</li>
<li><p>Go中有匿名函数，但是没有匿名方法</p>
</li>
</ul>
<h2 id="并发-Concurrency"><a href="#并发-Concurrency" class="headerlink" title="并发 Concurrency"></a><span id="并发-concurrency"><strong>并发 Concurrency</strong></span></h2><ul>
<li><p>协程<code>goroutine</code>是由Go运行时环境管理的轻量级线程。<br>使用关键字<code>go</code>调用一个函数/方法，启动一个新的协程goroutine</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">say</span><span class="params">(i <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;goroutine:&quot;</span>, i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> say(i)</span><br><span class="line">    &#125;</span><br><span class="line">    say(<span class="number">0</span>)</span><br><span class="line">    time.Sleep(<span class="number">5</span> * time.Second)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  主协程goroutine输出0，其他由go启动的几个子协程分别输出1～5</p>
<blockquote>
<p>goroutine: 0<br>  goroutine: 1<br>  goroutine: 2<br>  goroutine: 3<br>  goroutine: 4<br>  goroutine: 5</p>
</blockquote>
</li>
<li><p>goroutine 在相同的地址空间中运行，因此访问共享内存必须进行同步。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mu sync.Mutex</span><br><span class="line"><span class="keyword">var</span> i <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">range</span> [<span class="number">5</span>]<span class="keyword">byte</span>&#123;&#125; &#123;</span><br><span class="line">        <span class="keyword">go</span> Add()</span><br><span class="line">    &#125;</span><br><span class="line">    time.Sleep(<span class="number">5</span>*time.Second)</span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 使用互斥锁防止多个协程goroutine同时修改共享变量</span></span><br><span class="line">    <span class="comment">// 只能限制同时访问此方法修改变量，在方法外修改则限制是无效的</span></span><br><span class="line">    mu.Lock()</span><br><span class="line">    <span class="keyword">defer</span> mu.Unlock()</span><br><span class="line">    i++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用通道channel进行同步</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i <span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">byte</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">range</span> [<span class="number">5</span>]<span class="keyword">byte</span>&#123;&#125; &#123;</span><br><span class="line">        <span class="keyword">go</span> Add()</span><br><span class="line">    &#125;</span><br><span class="line">    time.Sleep(<span class="number">5</span>*time.Second)</span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ch &lt;- <span class="number">0</span></span><br><span class="line">    i++</span><br><span class="line">    &lt;-ch</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用channel在不同的goroutine之间通信</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上一个例子只是将channel用作同步开关，稍做修改即可在不同goroutine间通信</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i <span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">range</span> [<span class="number">5</span>]<span class="keyword">byte</span>&#123;&#125; &#123;</span><br><span class="line">        <span class="keyword">go</span> Add()</span><br><span class="line">    &#125;</span><br><span class="line">    ch &lt;- i</span><br><span class="line">    time.Sleep(<span class="number">5</span>*time.Second)</span><br><span class="line">    i = &lt;-ch</span><br><span class="line">    <span class="built_in">println</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 从channel中接收的值是来自其他goroutine发送的</span></span><br><span class="line">    x := &lt;-ch</span><br><span class="line">    x++</span><br><span class="line">    ch &lt;- x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="测试-Testing"><a href="#测试-Testing" class="headerlink" title="测试 Testing"></a><span id="测试-testing"><strong>测试 Testing</strong></span></h2></li>
<li><p>Go中自带轻量级的测试框架testing和自带的go test命令来实现单元测试和基准测试</p>
</li>
</ul>
<h3 id="单元测试-Unit"><a href="#单元测试-Unit" class="headerlink" title="单元测试 Unit"></a><span id="单元测试-unit"><strong>单元测试 Unit</strong></span></h3><ul>
<li><p>有如下待测试testgo包，一段简单的求和代码</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> testgo</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;math&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span><span class="params">(min, max <span class="keyword">int</span>)</span> <span class="params">(sum <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> min &lt; <span class="number">0</span> || max &lt; <span class="number">0</span> || max &gt; math.MaxInt32 || min &gt; max &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> ; min &lt;= max; min++ &#123;</span><br><span class="line">        sum += min</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>测试源文件名必须是<code>_test.go</code>结尾的，go test的时候才会执行到相应的代码<br>必须import testing包<br>所有的测试用例函数必须以<code>Test</code>开头<br>测试用例按照源码中编写的顺序依次执行<br>测试函数TestXxx()的参数是<code>*testing.T</code>，可以使用该类型来记录错误或者是测试状态<br>测试格式：<code>func TestXxx (t *testing.T)</code>，Xxx部分可以为任意的字母数字的组合，首字母不能是小写字母[a-z]，例如Testsum是错误的函数名。<br>函数中通过调用*testing.T的Error，Errorf，FailNow，Fatal，FatalIf方法标注测试不通过，调用Log方法用来记录测试的信息。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> testgo</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSum</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    s := Sum(<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">    t.Log(<span class="string">&quot;Sum 1 to 0:&quot;</span>, s)</span><br><span class="line">    <span class="keyword">if</span> <span class="number">0</span> != s &#123;</span><br><span class="line">        t.Error(<span class="string">&quot;not equal.&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    s = Sum(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">    t.Log(<span class="string">&quot;Sum 1 to 10:&quot;</span>, s)</span><br><span class="line">    <span class="keyword">if</span> <span class="number">55</span> != s &#123;</span><br><span class="line">        t.Error(<span class="string">&quot;not equal.&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在当前包中执行测试：<code>go test -v</code></p>
<blockquote>
<p>=== RUN TestSum<br>— PASS: TestSum (0.00s)  </p>
<pre><code>  t0_test.go:7: Sum 1 to 0: 0  
  t0_test.go:12: Sum 1 to 10: 55  </code></pre>
<p>PASS<br>ok      /home/cxy/go/src/testgo        0.004s</p>
</blockquote>
</li>
</ul>
<h3 id="基准测试-Benchmark"><a href="#基准测试-Benchmark" class="headerlink" title="基准测试 Benchmark"></a><span id="基准测试-benchmark"><strong>基准测试 Benchmark</strong></span></h3><ul>
<li><p>基准测试 Benchmark用来检测函数/方法的性能<br>基准测试用例函数必须以<code>Benchmark</code>开头<br>go test默认不会执行基准测试的函数，需要加上参数-test.bench，语法:-test.bench=”test_name_regex”，例如go test -test.bench=”.*”表示测试全部的基准测试函数<br>在基准测试用例中，在循环体内使用testing.B.N，使测试可以正常的运行</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> testgo</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkSum</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">    b.Logf(<span class="string">&quot;Sum 1 to %d: %d\n&quot;</span>, b.N, Sum(<span class="number">1</span>, b.N))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在当前包中执行测试：<code>go test -v -bench .</code></p>
<blockquote>
<p>BenchmarkSum    2000000000               0.91 ns/op<br>— BENCH: BenchmarkSum  </p>
<pre><code>  t0_test.go:19: Sum 1 to 1: 1  
  t0_test.go:19: Sum 1 to 100: 5050  
  t0_test.go:19: Sum 1 to 10000: 50005000  
  t0_test.go:19: Sum 1 to 1000000: 500000500000  
  t0_test.go:19: Sum 1 to 100000000: 5000000050000000  
  t0_test.go:19: Sum 1 to 2000000000: 2000000001000000000  </code></pre>
<p>ok      /home/cxy/go/src/testgo        1.922s</p>
</blockquote>
</li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>Google Go语言 语法笔记</p><p><a href="https://huzhiliang.com/2019/10/05/Google-Go%E8%AF%AD%E8%A8%80-%E8%AF%AD%E6%B3%95%E7%AC%94%E8%AE%B0/">https://huzhiliang.com/2019/10/05/Google-Go%E8%AF%AD%E8%A8%80-%E8%AF%AD%E6%B3%95%E7%AC%94%E8%AE%B0/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>ฅ´ω`ฅ</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2019-10-05</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2019-12-26</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Go/">Go</a></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/" alt="支付宝"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><div class="notification is-danger">You forgot to set the <code>business</code> or <code>currency_code</code> for Paypal. Please set it in <code>_config.yml</code>.</div><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/" alt="微信"></span></a></div></div></div><div class="card"><nav class="post-navigation mt-4 level is-mobile card-content"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2019/10/08/Copy-List-with-Random-Pointer/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Copy List with Random Pointer</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2019/10/04/Longest-Common-Subsequence/"><span class="level-item">Longest Common Subsequence</span><i class="level-item fas fa-chevron-right"></i></a></div></nav></div><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="notification is-danger">You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.</div></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">161</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">14</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">97</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener" id="widget-follow">微博 Weibo</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div><a class="link-more button is-light is-small size-small" href="/friends/">查看更多</a></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/C/"><span class="level-start"><span class="level-item">C++</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Golang/"><span class="level-start"><span class="level-item">Golang</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Kaggle/"><span class="level-start"><span class="level-item">Kaggle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/LeetCode/"><span class="level-start"><span class="level-item">LeetCode</span></span><span class="level-end"><span class="level-item tag">85</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="level-start"><span class="level-item">数据结构</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">机器学习</span></span><span class="level-end"><span class="level-item tag">26</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">深度学习</span></span><span class="level-end"><span class="level-item tag">29</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/CNN/"><span class="level-start"><span class="level-item">CNN</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/NLP/"><span class="level-start"><span class="level-item">NLP</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E8%BF%81%E7%A7%BB%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">迁移学习</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%A0%B4%E8%A7%A3/"><span class="level-start"><span class="level-item">破解</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">算法</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">英语学习</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-03-05T05:41:28.000Z">2020-03-05</time></p><p class="title"><a href="/2020/03/05/%E6%9D%A1%E4%BB%B6%E9%9A%8F%E6%9C%BA%E5%9C%BACRF-%E4%B8%89-%E6%A8%A1%E5%9E%8B%E5%AD%A6%E4%B9%A0%E4%B8%8E%E7%BB%B4%E7%89%B9%E6%AF%94%E7%AE%97%E6%B3%95%E8%A7%A3%E7%A0%81/">条件随机场CRF(三) 模型学习与维特比算法解码</a></p><p class="categories"><a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a> / <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/NLP/">NLP</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-03-04T08:24:55.000Z">2020-03-04</time></p><p class="title"><a href="/2020/03/04/%E6%9D%A1%E4%BB%B6%E9%9A%8F%E6%9C%BA%E5%9C%BACRF-%E4%BA%8C-%E5%89%8D%E5%90%91%E5%90%8E%E5%90%91%E7%AE%97%E6%B3%95%E8%AF%84%E4%BC%B0%E6%A0%87%E8%AE%B0%E5%BA%8F%E5%88%97%E6%A6%82%E7%8E%87/">条件随机场CRF(二) 前向后向算法评估标记序列概率</a></p><p class="categories"><a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a> / <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/NLP/">NLP</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-03-03T02:59:49.000Z">2020-03-03</time></p><p class="title"><a href="/2020/03/03/%E6%9D%A1%E4%BB%B6%E9%9A%8F%E6%9C%BA%E5%9C%BACRF-%E4%B8%80-%E4%BB%8E%E9%9A%8F%E6%9C%BA%E5%9C%BA%E5%88%B0%E7%BA%BF%E6%80%A7%E9%93%BE%E6%9D%A1%E4%BB%B6%E9%9A%8F%E6%9C%BA%E5%9C%BA/">条件随机场CRF(一)从随机场到线性链条件随机场</a></p><p class="categories"><a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a> / <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/NLP/">NLP</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-03-02T02:46:01.000Z">2020-03-02</time></p><p class="title"><a href="/2020/03/02/%E6%96%87%E6%9C%AC%E6%8C%96%E6%8E%98%E7%9A%84%E5%88%86%E8%AF%8D%E5%8E%9F%E7%90%86/">文本挖掘的分词原理</a></p><p class="categories"><a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a> / <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/NLP/">NLP</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-02-20T01:01:00.000Z">2020-02-20</time></p><p class="title"><a href="/2020/02/20/optimize-water-distribution-in-a-village/">optimize water distribution in a village</a></p><p class="categories"><a href="/categories/LeetCode/">LeetCode</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">十一月 2019</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">九月 2019</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">八月 2019</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">七月 2019</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">四月 2019</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">三月 2019</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">二月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">一月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">八月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">七月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">五月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">三月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/02/"><span class="level-start"><span class="level-item">二月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">一月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">十二月 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/11/"><span class="level-start"><span class="level-item">十一月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/10/"><span class="level-start"><span class="level-item">十月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/09/"><span class="level-start"><span class="level-item">九月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/07/"><span class="level-start"><span class="level-item">七月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">六月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">五月 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/03/"><span class="level-start"><span class="level-item">三月 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/02/"><span class="level-start"><span class="level-item">二月 2017</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/04/"><span class="level-start"><span class="level-item">四月 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/02/"><span class="level-start"><span class="level-item">二月 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Array/"><span class="tag">Array</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Attention/"><span class="tag">Attention</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Binary-Tree/"><span class="tag">Binary Tree</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CFG/"><span class="tag">CFG</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CNN/"><span class="tag">CNN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CPU/"><span class="tag">CPU</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CYK/"><span class="tag">CYK</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Caffee/"><span class="tag">Caffee</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/English/"><span class="tag">English</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Facebook/"><span class="tag">Facebook</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GAN/"><span class="tag">GAN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GBDT/"><span class="tag">GBDT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GPU/"><span class="tag">GPU</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GRN/"><span class="tag">GRN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GloVe/"><span class="tag">GloVe</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go/"><span class="tag">Go</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Google-apac/"><span class="tag">Google apac</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go%E8%AF%AD%E8%A8%80/"><span class="tag">Go语言</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Greedy/"><span class="tag">Greedy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HMM/"><span class="tag">HMM</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IBM-Modes/"><span class="tag">IBM Modes</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/KL%E6%95%A3%E5%BA%A6/"><span class="tag">KL散度</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LSTM/"><span class="tag">LSTM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LeetCode/"><span class="tag">LeetCode</span><span class="tag">31</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Lexicalized-PCFG/"><span class="tag">Lexicalized PCFG</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Lexized-PCFG/"><span class="tag">Lexized PCFG</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Log-Linear-Models/"><span class="tag">Log-Linear Models</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Machine-Learning/"><span class="tag">Machine Learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PCFG/"><span class="tag">PCFG</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Paper/"><span class="tag">Paper</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Programmer/"><span class="tag">Programmer</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pytorch/"><span class="tag">Pytorch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Queue/"><span class="tag">Queue</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RNN/"><span class="tag">RNN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Seq2seq/"><span class="tag">Seq2seq</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tagging/"><span class="tag">Tagging</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tencent/"><span class="tag">Tencent</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tensorflow/"><span class="tag">Tensorflow</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VIP/"><span class="tag">VIP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Viterbi/"><span class="tag">Viterbi</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Word-representation/"><span class="tag">Word representation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XGBoost/"><span class="tag">XGBoost</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/exhaustive-search/"><span class="tag">exhaustive search</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/numpy/"><span class="tag">numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spark/"><span class="tag">spark</span><span class="tag">23</span></a></div><div class="control"><a class="tags has-addons" href="/tags/turtle/"><span class="tag">turtle</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/word2vec/"><span class="tag">word2vec</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%B8%93%E9%A2%98/"><span class="tag">专题</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2/"><span class="tag">二分搜索</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2%E6%A0%91/"><span class="tag">二分搜索树</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%8C%E5%88%86%E6%A0%91/"><span class="tag">二分树</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"><span class="tag">二进制</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/"><span class="tag">优化算法</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E7%B1%BB/"><span class="tag">分类</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E8%AF%8D/"><span class="tag">分词</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%89%91%E6%8C%87offer/"><span class="tag">剑指offer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8A%A8%E6%80%81%E5%9B%9E%E5%BD%92/"><span class="tag">动态回归</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"><span class="tag">动态规划</span><span class="tag">22</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9B%9E%E5%BD%92/"><span class="tag">回归</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9B%BE%E8%AE%BA/"><span class="tag">图论</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8E%92%E5%BA%8F/"><span class="tag">排序</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E5%AD%A6/"><span class="tag">数学</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E5%AD%A6%E5%8E%9F%E7%90%86/"><span class="tag">数学原理</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"><span class="tag">数据分析</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9D%A1%E4%BB%B6%E9%9A%8F%E6%9C%BA%E5%9C%BA/"><span class="tag">条件随机场</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9E%81%E5%A4%A7%E4%BC%BC%E7%84%B6/"><span class="tag">极大似然</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%A8%A1%E5%9E%8B%E5%8E%8B%E7%BC%A9/"><span class="tag">模型压缩</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2/"><span class="tag">模型部署</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="tag">深度学习</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%89%88%E6%9D%83/"><span class="tag">版权</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%89%B9%E5%BE%81%E6%8A%BD%E5%8F%96/"><span class="tag">特征抽取</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AC%94%E8%AE%B0/"><span class="tag">笔记</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95%E5%8E%9F%E7%90%86/"><span class="tag">算法原理</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95%E5%A4%8D%E6%9D%82%E5%BA%A6/"><span class="tag">算法复杂度</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B/"><span class="tag">线性模型</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%84%E5%90%88%E6%A0%91/"><span class="tag">组合树</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%8F%E5%85%B8%E7%BD%91%E7%BB%9C/"><span class="tag">经典网络</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%9F%E8%AE%A1%E6%9C%BA%E5%99%A8%E7%BF%BB%E8%AF%91/"><span class="tag">统计机器翻译</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90/"><span class="tag">网易云音乐</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%81%9A%E7%B1%BB/"><span class="tag">聚类</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/"><span class="tag">背包问题</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%84%9A%E6%9C%AC/"><span class="tag">脚本</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%AD%E6%B3%95/"><span class="tag">语法</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/"><span class="tag">语言模型</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B6%85%E5%8F%82%E6%95%B0%E8%B0%83%E6%95%B4/"><span class="tag">超参数调整</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BF%81%E7%A7%BB%E5%AD%A6%E4%B9%A0/"><span class="tag">迁移学习</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%80%92%E5%BD%92/"><span class="tag">递归</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%82%AE%E4%BB%B6/"><span class="tag">邮件</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8/"><span class="tag">链表</span><span class="tag">19</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%99%8D%E7%BB%B4/"><span class="tag">降维</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9D%A2%E8%AF%95%E4%B8%93%E5%9C%BA/"><span class="tag">面试专场</span><span class="tag">2</span></a></div></div></div></div></div><div class="card widget" id="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/" alt="MCFON" height="28"><img class="logo-img-dark" src="/" alt="MCFON" height="28"></a><p class="is-size-7"><span>&copy; 2020 ฅ´ω`ฅ</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/imaegoo/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><a href="http://www.miitbeian.gov.cn" target="_blank">豫ICP备18017229号</a> - </p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><div class="searchbox-pinyin"><label class="checkbox"><input id="search-by-pinyin" type="checkbox" checked="checked"><span> 拼音检索</span></label></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/imaegoo/pinyin.js" defer></script><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script type="text/javascript" src="/js/imaegoo/imaegoo.js"></script><script type="text/javascript" src="/js/imaegoo/universe.js"></script><script type="text/javascript" src="/js/live2d/autoload.js"></script></body></html>